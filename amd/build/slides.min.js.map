{"version":3,"sources":["../src/slides.js"],"names":["define","$","log","def","RevealImplement","Str","ModalFactory","Fragment","debug","instance","itemdata","clone","extend","init","index","quizhelper","register_events","prepare_html","self","uniqueid","on","do_next","hasgrade","totalitems","correctitems","grade","e","target","querySelector","initialize","setTheme","selectedtheme","timelimit","show","progressTimer","height","timeLimit","onFinish","trigger","register_previewbutton","buttonid","previewbtn","document","getElementById","addEventListener","preventDefault","form","create","type","types","CANCEL","large","removeOnClose","templateContext","classes","title","get_string","body","loadFragment","M","cfg","contextid","formdata","URLSearchParams","FormData","entries","toString","then","modal","getFooter","addClass","themeselect","value"],"mappings":"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","sourcesContent":["define([\n    'jquery', 'core/log', 'mod_minilesson/definitions', './reveal',\n    'core/str', 'core/modal_factory', 'core/fragment'\n],\n    function ($, log, def, RevealImplement, Str, ModalFactory, Fragment) {\n        \"use strict\"; // jshint ;_;\n\n        /*\n       This file is to manage the slides item type\n        */\n\n        log.debug('MiniLesson Slides: initialising');\n\n        return {\n\n            instance: null,\n\n            itemdata: {},\n\n            //for making multiple instances\n            clone: function () {\n                return $.extend(true, {}, this);\n            },\n\n            init: function (index, itemdata, quizhelper) {\n                this.itemdata = itemdata;\n                this.register_events(index, itemdata, quizhelper);\n            },\n\n            prepare_html: function (itemdata) {\n                //do something\n            },\n\n            register_events: function (index, itemdata, quizhelper) {\n                var self = this;\n                //When click next button , report and leave it up to parent to eal with it.\n                $(\"#\" + itemdata.uniqueid + \"_container .minilesson_nextbutton\").on('click', function (e) {\n                    var stepdata = {};\n                    stepdata.index = index;\n                    stepdata.hasgrade = false;\n                    stepdata.totalitems = 0;\n                    stepdata.correctitems = 0;\n                    stepdata.grade = 0;\n                    quizhelper.do_next(stepdata);\n                });\n                $(\"#\" + itemdata.uniqueid + \"_container\").on(\"showElement\", async (e) => {\n                    if (!self.instance) {\n                        self.instance = await RevealImplement.init(e.target.querySelector('.reveal'));\n                        self.instance.initialize();\n                    }\n                    RevealImplement.setTheme(self.itemdata.selectedtheme);\n                    if (itemdata.timelimit > 0) {\n                        $(\"#\" + itemdata.uniqueid + \"_container .progress-container\").show();\n                        $(\"#\" + itemdata.uniqueid + \"_container .progress-container i\").show();\n                        $(\"#\" + itemdata.uniqueid + \"_container .progress-container #progresstimer\").progressTimer({\n                            height: '5px',\n                            timeLimit: itemdata.timelimit,\n                            onFinish: function () {\n                                $(\"#\" + itemdata.uniqueid + \"_container .minilesson_nextbutton\").trigger('click');\n                            }\n                        });\n                    }\n                });\n            },\n\n            register_previewbutton: function (buttonid) {\n                var previewbtn = document.getElementById(buttonid);\n                if (!previewbtn) {\n                    return;\n                }\n                previewbtn.addEventListener('click', function (e) {\n                    e.preventDefault();\n                    var form = previewbtn.form;\n                    if (!form) {\n                        return;\n                    }\n                    ModalFactory.create({\n                        type: ModalFactory.types.CANCEL,\n                        large: true,\n                        removeOnClose: true,\n                        templateContext: {\n                            classes: 'minilesson-slides-preview-modal'\n                        },\n                        title: Str.get_string('slides:previewmodaltitle', 'mod_minilesson'),\n                        body: Fragment.loadFragment('mod_minilesson', 'preview_slides', M.cfg.contextid, {\n                            formdata: new URLSearchParams([...new FormData(form).entries()]).toString()\n                        })\n                    }).then(function (modal) {\n                        modal.getFooter().addClass('d-none');\n                        modal.show();\n                    });\n                    return;\n                });\n                if (previewbtn.form) {\n                    const themeselect = previewbtn.form.querySelector('[data-control=\"theme\"]');\n                    if (themeselect) {\n                        themeselect.addEventListener('change', function(e) {\n                            RevealImplement.setTheme(e.target.value);\n                        });\n                        RevealImplement.setTheme(themeselect.value);\n                    }\n                }\n            }\n        }; //end of return value\n    });"],"file":"slides.min.js"}