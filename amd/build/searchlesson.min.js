function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("mod_minilesson/searchlesson",["exports","core/ajax","core/notification","core/templates"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.registerFilter=void 0;b=g(b);c=f(c);d=g(d);function e(){if("function"!=typeof WeakMap)return null;var a=new WeakMap;e=function(){return a};return a}function f(a){if(a&&a.__esModule){return a}if(null===a||"object"!==_typeof(a)&&"function"!=typeof a){return{default:a}}var b=e();if(b&&b.has(a)){return b.get(a)}var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a){if(Object.prototype.hasOwnProperty.call(a,f)){var g=d?Object.getOwnPropertyDescriptor(a,f):null;if(g&&(g.get||g.set)){Object.defineProperty(c,f,g)}else{c[f]=a[f]}}}c.default=a;if(b){b.set(a,c)}return c}function g(a){return a&&a.__esModule?a:{default:a}}a.registerFilter=function registerFilter(){var a=document.querySelector("#lessonbank_filters"),e=document.querySelector("[data-region=\"cards-container\"]"),f=function(a){var f=new URLSearchParams;if(a.elements["searchgroup[language]"]){f.append("language",a.elements["searchgroup[language]"].value)}if(a.elements["searchgroup[keyword]"]){f.append("keywords",a.elements["searchgroup[keyword]"].value)}if(a.elements["level[]"]){var h=a.elements["level[]"].selectedOptions;Array.from(h).forEach(function(a,b){f.append("level[".concat(b,"]"),a.value)})}var g={function:"local_lessonbank_list_minilessons",args:f.toString()};b.default.call([{methodname:"".concat("mod_minilesson","_lessonbank"),args:g}])[0].then(function(a){a=JSON.parse(a);window.console.log(a);d.default.render("".concat("mod_minilesson","/lessonbankitems"),{items:a}).then(function(a,b){return d.default.replaceNodeContents(e,a,b)}).then(function(){var a;null===(a=document.querySelector("#region-main"))||void 0===a?void 0:a.scrollIntoView({behavior:"smooth",block:"start"})});return null}).catch(c.exception)};e.addEventListener("click",function(a){if(a.target.href){return}a.preventDefault();var b=a.target.closest("[data-action=\"download\"]");if(b){if(!b.dataset.id){return}var c=+b.dataset.id,d=new URL(window.location.href);d.searchParams.set("restore",c);d.searchParams.set("sesskey",M.cfg.sesskey);window.location.href=d.toString()}var e=a.target.closest("[data-action=\"showtext\"]");if(e){var f=e.parentElement,g=f.firstElementChild.cloneNode(!0).outerHTML;f.innerHTML=g+f.dataset.text}});null===a||void 0===a?void 0:a.addEventListener("submit",function(b){b.preventDefault();f(a)});if(a){f(a)}}});
//# sourceMappingURL=searchlesson.min.js.map
