{"version":3,"file":"datatables.min.js","sources":["../src/datatables.js"],"sourcesContent":["define(\n    ['jquery', 'core/str', 'core/log', 'core/modal_factory', 'core/modal_events', 'https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js'],\n    function ($, str, log, ModalFactory, ModalEvents) {\n        \"use strict\"; // jshint ;_;\n\n    /*\n    This file contains class and ID definitions.\n    */\n\n\n        log.debug('MiniLesson Teacher Datatables helper: initialising');\n\n        return{\n            //pass in config, amd set up table\n            init: function (props) {\n                //pick up opts from html\n                var thetable = $('#' + props.tableid);\n                this.dt = thetable.DataTable(props.tableprops);\n                this.setup_bulkdelete();\n            },\n\n            getDataTable: function (tableid) {\n                return $('#' + tableid).DataTable();\n            },\n\n            setup_bulkdelete: function () {\n                //get the bulk delete button\n                var bulkdelete_btn = $('#mod_minilesson_deleteconfirmation');\n\n                //handle the click event\n                bulkdelete_btn.on('click', function (e) {\n                    var btn = bulkdelete_btn[0];\n\n                    ModalFactory.create({\n                        type: ModalFactory.types.SAVE_CANCEL,\n                        title: str.get_string('confirmation', 'admin'),\n                        body: str.get_string('bulkdeletequestion', 'mod_minilesson'),\n                        removeOnClose: true\n                    }).then(function (modal) {\n                        modal.setSaveButtonText(str.get_string('yes', 'moodle'));\n\n                        modal.getRoot().on(ModalEvents.save, function () {\n                            var form = btn.closest('form');\n                            var input = document.createElement('input');\n                            input.setAttribute('type', 'hidden');\n                            input.setAttribute('name', btn.getAttribute('name'));\n                            input.setAttribute('value', btn.getAttribute('value'));\n                            form.appendChild(input);\n                            if (typeof M.core_formchangechecker !== 'undefined') {\n                                M.core_formchangechecker.set_form_submitted();\n                            }\n                            form.submit();\n                        });\n\n                        modal.show();\n\n                        return modal;\n                    });\n                });\n            }\n\n        };//end of return value\n    }\n);"],"names":["define","$","str","log","ModalFactory","ModalEvents","debug","init","props","thetable","tableid","dt","DataTable","tableprops","setup_bulkdelete","getDataTable","bulkdelete_btn","on","e","btn","create","type","types","SAVE_CANCEL","title","get_string","body","removeOnClose","then","modal","setSaveButtonText","getRoot","save","form","closest","input","document","createElement","setAttribute","getAttribute","appendChild","M","core_formchangechecker","set_form_submitted","submit","show"],"mappings":"AAAAA,mCACI,CAAC,SAAU,WAAY,WAAY,qBAAsB,oBAAqB,kEAC9E,SAAUC,EAAGC,IAAKC,IAAKC,aAAcC,oBAQjCF,IAAIG,MAAM,sDAEJ,CAEFC,KAAM,SAAUC,WAERC,SAAWR,EAAE,IAAMO,MAAME,cACxBC,GAAKF,SAASG,UAAUJ,MAAMK,iBAC9BC,oBAGTC,aAAc,SAAUL,gBACbT,EAAE,IAAMS,SAASE,aAG5BE,iBAAkB,eAEVE,eAAiBf,EAAE,sCAGvBe,eAAeC,GAAG,SAAS,SAAUC,OAC7BC,IAAMH,eAAe,GAEzBZ,aAAagB,OAAO,CAChBC,KAAMjB,aAAakB,MAAMC,YACzBC,MAAOtB,IAAIuB,WAAW,eAAgB,SACtCC,KAAMxB,IAAIuB,WAAW,qBAAsB,kBAC3CE,eAAe,IAChBC,MAAK,SAAUC,cACdA,MAAMC,kBAAkB5B,IAAIuB,WAAW,MAAO,WAE9CI,MAAME,UAAUd,GAAGZ,YAAY2B,MAAM,eAC7BC,KAAOd,IAAIe,QAAQ,QACnBC,MAAQC,SAASC,cAAc,SACnCF,MAAMG,aAAa,OAAQ,UAC3BH,MAAMG,aAAa,OAAQnB,IAAIoB,aAAa,SAC5CJ,MAAMG,aAAa,QAASnB,IAAIoB,aAAa,UAC7CN,KAAKO,YAAYL,YACuB,IAA7BM,EAAEC,wBACTD,EAAEC,uBAAuBC,qBAE7BV,KAAKW,YAGTf,MAAMgB,OAEChB"}