{"version":3,"sources":["../src/scatter.js"],"names":["define","$","notification","def","log","templates","anim","Ajax","str","spacegame","Url","debug","pointer","jsondata","props","language","startTime","scatteritems","controls","progressTimer","markedIndex","clone","extend","init","index","itemdata","quizhelper","self","animopts","useanimatecss","init_controls","register_events","start","container","uniqueid","stage","find","next_button","progress_container","result_container","actionbutton","retrybutton","questionheader_contents","itemtext","$listItems","children","each","i","listitem","shuffleditems","item","shuffleItems","array","Array","from","currentIndex","length","randomIndex","Math","floor","random","forEach","shuffleitem","classList","remove","append","check_crosscard","e","$target","target","is","filter","_","contains","removeClass","push","includes","rIndex","findIndex","slice","lastIndex","lastItem","currentItem","key","correct","setTimeout","eq","addClass","end","next_question","stepdata","hasgrade","totalitems","correctitems","grade","round","do_next","on","bind","$focused","document","activeElement","hasClass","call","preventDefault","timelimit","show","clearInterval","height","timeLimit","onFinish","attr","Date","now","trigger","hide","scatteritem","tdata","prettytime","results","totaltime","Number","parseFloat","toFixed","pretty_print_secs","showitemreview","allowretry","question","term","answer","definition","yellow_starImgurl","imageUrl","timerImgurl","render","then","html","js","runTemplateJS","rc","scatterbtn","collapse","updateBtn","expanded"],"mappings":"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","sourcesContent":["\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Scatter app javascript for Poodll minilesson\n *\n * @package    mod_minilesson\n * @copyright  2024 Justin Hunt (poodllsupport@gmail.com)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(\n    ['jquery', 'core/notification', 'mod_minilesson/definitions', 'core/log', 'core/templates',\n    'mod_minilesson/animatecss', 'core/ajax', 'core/str', 'mod_minilesson/spacegame', 'core/url'],\n    function ($, notification, def, log, templates, anim, Ajax, str, spacegame, Url) {\n\n        \"use strict\"; // jshint ;_;\n\n        /*\n        This file is to manage the Space Game item type.\n         */\n\n        log.debug('MiniLesson Scatter: initialising');\n\n        return {\n\n            pointer: 1,\n            jsondata: null,\n            props: null,\n            language: 'en-US',\n            startTime: null,\n            scatteritems: [],\n            controls: {},\n            progressTimer: null,\n            markedIndex: [],\n\n            //for making multiple instances\n            clone: function () {\n                return $.extend(true, {}, this);\n            },\n\n\n            init: function (index, itemdata, quizhelper) {\n                var self = this;\n\n                log.debug(itemdata);\n                self.scatteritems = itemdata.scatteritems;\n                self.language = itemdata.language;\n                self.itemdata = itemdata;\n                self.index = index;\n                self.quizhelper = quizhelper;\n\n                //anim\n                var animopts = {};\n                animopts.useanimatecss = quizhelper.useanimatecss;\n                anim.init(animopts);\n\n                this.init_controls();\n                this.register_events();\n                this.start();\n\n\n            },  //end of init\n\n            init_controls: function () {\n                var self = this;\n\n                self.controls = {\n                    container: $(\"#\" + self.itemdata.uniqueid + \"_container\")\n                };\n                self.controls.stage = self.controls.container.find(\".ml_scatter_stage\");\n                self.controls.next_button = self.controls.container.find(\".minilesson_nextbutton\");\n                self.controls.progress_container = self.controls.container.find(\".progress-container\");\n                self.controls.result_container = self.controls.container.find(\".ml_scatter_resultscontainer\");\n                self.controls.actionbutton = self.controls.container.find(\".minilesson_actionbutton\");\n                self.controls.retrybutton = self.controls.container.find(\".minilesson-try-again\");\n                self.controls.questionheader_contents = self.controls.container.find(\".minilesson_questionheader_contents\");\n                self.controls.itemtext  = self.controls.container.find(\".mod_minilesson_itemtext \");\n\n                const $listItems = self.controls.stage.children('.ml_scatter_listitem');\n                $listItems.each((i, listitem) => {\n                    self.itemdata.shuffleditems[i].item = listitem;\n                });\n            },\n\n            shuffleItems: function () {\n                var self = this;\n                let array = Array.from(self.itemdata.shuffleditems);\n                let currentIndex = array.length, randomIndex;\n\n                while (currentIndex != 0) {\n                    randomIndex = Math.floor(Math.random() * currentIndex);\n                    currentIndex--;\n                    [array[currentIndex], array[randomIndex]] = [\n                        array[randomIndex], array[currentIndex]];\n                }\n                self.itemdata.shuffleditems = array;\n                self.itemdata.shuffleditems.forEach(shuffleitem => {\n                    shuffleitem.item.classList.remove('selected','matched','shake');\n                    self.controls.stage.append(shuffleitem.item);\n                });\n            },\n\n            check_crosscard: function (e) {\n                var self = this;\n                const $target = $(e.target);\n                const $listItems = self.controls.stage.children('.ml_scatter_listitem');\n                if (!$listItems.is($target)) {\n                    return;\n                }\n                $listItems.filter((_, i) => !i.classList.contains('matched')).removeClass('shake');\n                const currentIndex = $target.index();\n                if (self.markedIndex.length == 0) {\n                    self.markedIndex.push(currentIndex);\n                } else if (self.markedIndex.includes(currentIndex)) {\n                    const rIndex = self.markedIndex.findIndex(i => i === currentIndex);\n                    if (rIndex > -1) {\n                        self.markedIndex.slice(rIndex, 1);\n                    }\n                } else {\n                    const lastIndex = self.markedIndex[0];\n                    const lastItem = self.itemdata.shuffleditems[lastIndex];\n                    const currentItem = self.itemdata.shuffleditems[currentIndex];\n                    self.markedIndex.push(currentIndex);\n                    if (lastItem.key === currentItem.key) {\n                        //Correct Choice\n                        self.itemdata.scatteritems[currentItem.key].correct = true;\n                        setTimeout(function () {\n                            $listItems.eq(lastIndex).addClass('matched');\n                            $listItems.eq(currentIndex).addClass('matched');\n                            if (!$listItems.filter(':not(.matched)').length) {\n                                self.end();\n                            }\n                            self.markedIndex = [];\n                        }, 200);\n                    } else {\n                        self.itemdata.scatteritems[currentItem.key].correct = false;\n                        $listItems.eq(lastIndex).addClass('shake');\n                        $listItems.eq(currentIndex).addClass('shake');\n                        setTimeout(function () {\n                            $listItems.eq(lastIndex).removeClass('selected shake');\n                            $listItems.eq(currentIndex).removeClass('selected shake');\n                            self.markedIndex = [];\n                        }, 300);\n                    }\n                }\n                self.markedIndex.forEach(i => {\n                    $listItems.eq(i).addClass('selected');\n                });\n                if (!$listItems.filter(':not(.matched)').length) {\n                    self.end();\n                }\n            },\n\n            next_question: function () {\n                var self = this;\n\n                var stepdata = {};\n                stepdata.index = self.index;\n                stepdata.hasgrade = true;\n                stepdata.totalitems = self.itemdata.scatteritems.length;\n                stepdata.correctitems = self.itemdata.scatteritems.filter(e => e.correct).length;\n                stepdata.grade = Math.round((stepdata.correctitems / stepdata.totalitems) * 100);\n                self.quizhelper.do_next(stepdata);\n            },\n\n            register_events: function () {\n                var self = this;\n\n                // Click and space key for scatter stage\n                self.controls.stage.on('click', self.check_crosscard.bind(self));\n                self.controls.stage.on('keydown', function (e) {\n                    if (e.key === ' ' || e.key === 'Spacebar') {\n                        // Only respond if focused on a list item\n                        var $focused = $(document.activeElement);\n                        if ($focused.hasClass('ml_scatter_listitem')) {\n                            self.check_crosscard.call(self, { target: document.activeElement });\n                            e.preventDefault();\n                        }\n                    }\n                });\n\n                self.controls.container.on(\"showElement\", () => {\n                    if (self.itemdata.timelimit > 0) {\n                        self.controls.progress_container.show();\n                        self.controls.progress_container.find('i').show();\n                        if (self.progressTimer) {\n                            clearInterval(self.progressTimer);\n                            self.progressTimer = null;\n                        }\n                        self.progressTimer = self.controls.progress_container.find('#progresstimer').progressTimer({\n                            height: '5px',\n                            timeLimit: self.itemdata.timelimit,\n                            onFinish: function () {\n                                self.end();\n                            }\n                        }).attr('timer');\n                    }\n                    self.startTime = Date.now();\n                });\n\n                // Click and space key for try again button\n                self.controls.container.on('click', '#minilesson-try-again', () => {\n                    self.startTime = null;\n                    self.markedIndex = [];\n                    self.shuffleItems();\n                    self.controls.container.trigger(\"showElement\");\n                    self.controls.result_container.hide();\n                    self.controls.stage.show();\n                    self.controls.progress_container.find('#progresstimer,i').show();\n                    self.itemdata.scatteritems.forEach(scatteritem => {\n                       scatteritem.correct = false;\n                    });\n                    self.controls.actionbutton.show();\n                });\n                self.controls.container.on('keydown', '#minilesson-try-again', function (e) {\n                    if (e.key === ' ' || e.key === 'Spacebar') {\n                        $(this).trigger('click');\n                        e.preventDefault();\n                    }\n                });\n\n                // Click and space key for next button\n                self.controls.next_button.on('click', function () {\n                    self.next_question();\n                });\n                self.controls.next_button.on('keydown', function (e) {\n                    if (e.key === ' ' || e.key === 'Spacebar') {\n                        $(this).trigger('click');\n                        e.preventDefault();\n                    }\n                });\n            },\n\n            start: function () {\n\n            },\n\n            end: function () {\n                var self = this;\n                var tdata = {\n                    prettytime: '00:00',\n                    results: []\n                };\n                var totaltime = Date.now() - self.startTime;\n                if (totaltime > 0) {\n                    totaltime = Number.parseFloat(totaltime / 1000).toFixed(0);\n                }\n                if (totaltime > 0) {\n                    tdata['prettytime'] = spacegame.pretty_print_secs(totaltime);\n                }\n                tdata['showitemreview'] = self.quizhelper.showitemreview;\n                tdata['allowretry'] = self.itemdata.allowretry;\n                tdata['total'] = self.itemdata.scatteritems.length;\n                tdata['totalcorrect'] = self.itemdata.scatteritems.filter(e => e.correct).length;\n                self.itemdata.scatteritems.forEach(item => {\n                    tdata.results.push({\n                        question: item.term,\n                        answer: item.definition,\n                        correct: item.correct\n                    });\n                });\n                self.controls.result_container.show();\n                self.controls.stage.hide();\n                self.controls.progress_container.hide();\n                self.controls.actionbutton.hide();\n                if (self.progressTimer) {\n                    clearInterval(self.progressTimer);\n                    self.progressTimer = null;\n                }\n                tdata.yellow_starImgurl = Url.imageUrl('yellow_star', 'mod_minilesson');\n                tdata.timerImgurl = Url.imageUrl('timer', 'mod_minilesson');\n                self.controls.questionheader_contents.hide();\n                self.controls.itemtext.hide();\n                templates.render('mod_minilesson/scatter_feedback', tdata).then(\n                    function (html, js) {\n                        self.controls.result_container.html(html);\n                        templates.runTemplateJS(js || '');\n                        try {\n                            const rc = self.controls.result_container;\n                            const scatterbtn = rc.find('.ml-scatter-btn');\n                            const collapse = rc.find('#ml-scatter-fb-container');\n                            if (collapse.length && scatterbtn.length) {\n                                function updateBtn(expanded) {\n                                    if (expanded) {\n                                        scatterbtn.find('.ml-scatter-show-text').addClass('d-none');\n                                        scatterbtn.find('.ml-scatter-hide-text').removeClass('d-none');\n                                    } else {\n                                        scatterbtn.find('.ml-scatter-show-text').removeClass('d-none');\n                                        scatterbtn.find('.ml-scatter-hide-text').addClass('d-none');\n                                    }\n                                }\n                                updateBtn(collapse.hasClass('show'));\n                                collapse.on('shown.bs.collapse', function () { updateBtn(true); });\n                                collapse.on('hidden.bs.collapse', function () { updateBtn(false); });\n                                // Fallback: toggle after click (in case non-bootstrap toggling is used)\n                                scatterbtn.on('click', function () {\n                                    updateBtn(collapse.hasClass('show'));\n                                });\n                            }\n                        } catch (e) {\n                            log.debug('Error attaching collapse toggle handlers: ' + e);\n                        }\n                    }\n                );\n            },\n\n\n        }; //end of return\n    }\n);"],"file":"scatter.min.js"}