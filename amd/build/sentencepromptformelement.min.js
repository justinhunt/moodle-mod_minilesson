define ("mod_minilesson/sentencepromptformelement",["exports","core/log"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.registerElement=void 0;b=function(a){return a&&a.__esModule?a:{default:a}}(b);var c=function(a){return"[data-region=\"".concat(a,"\"]")},d=function(a){var d=a.elementid,e=document.getElementById(d);if(e){b.default.debug(e);var f=e.querySelector(c("textarea")),g=e.querySelector(c("lines")),h=getComputedStyle(f);["fontFamily","fontSize","fontWeight","letterSpacing","lineHeight","padding"].forEach(function(a){g.style[a]=h[a]});var i=function(a){return a.endsWith("px")?parseInt(a.slice(0,-2),10):0},j="".concat(h.fontSize," ").concat(h.fontFamily),k=i(h.paddingLeft),l=i(h.paddingRight),m=document.createElement("canvas"),n=m.getContext("2d");n.font=j;var o=function(a){for(var b=f.getBoundingClientRect().width-k-l,c=a.split(" "),d=0,e="",g=0;g<c.length;g++){var h=n.measureText(c[g]+" ").width,j=n.measureText(e).width;if(j+h>b){d++;e=c[g]+" "}else{e+=c[g]+" "}}if(""!==e.trim()){d++}return d},p=function(){var a=f.value.split("\n"),b=a.map(function(a){return o(a)}),c=1,d=[];while(0<b.length){var e=b.shift();d.push(c);if(1<e){Array(e-1).fill("").forEach(function(){return d.push("")})}c++}return d},q=function(){var a=p();g.innerHTML=Array.from({length:a.length},function(b,c){return"<div>".concat(a[c]||"&nbsp;","</div>")}).join("")};f.addEventListener("input",function(){q()});q();var r=new ResizeObserver(function(){var a=f.getBoundingClientRect();g.style.height="".concat(a.height,"px");q()});r.observe(f);f.addEventListener("scroll",function(){g.scrollTop=f.scrollTop})}};a.registerElement=d});
//# sourceMappingURL=sentencepromptformelement.min.js.map
