{"version":3,"file":"shortanswer.min.js","sources":["../src/shortanswer.js"],"sourcesContent":["define(['jquery',\n      'core/log',\n      'mod_minilesson/definitions',\n      'mod_minilesson/pollyhelper',\n      'mod_minilesson/ttrecorder',\n      'mod_minilesson/animatecss'],\n    function($, log, def, polly, ttrecorder, anim) {\n  \"use strict\"; // jshint ;_;\n\n  /*\n  This file is to manage the quiz stage\n   */\n\n  log.debug('MiniLesson ShortAnswer: initialising');\n\n  return {\n\n    //a handle on the tt recorder\n    ttrec: null,\n\n    passmark: 100,//lower this if it often doesnt match (was 85)\n\n    fullycorrect: false,\n\n    partiallycorrect: false,\n\n    //for making multiple instances\n      clone: function () {\n          return $.extend(true, {}, this);\n     },\n\n    init: function(index, itemdata, quizhelper) {\n\n      //anim\n      var animopts = {};\n      animopts.useanimatecss=quizhelper.useanimatecss;\n      anim.init(animopts);\n      this.itemdata = itemdata;\n\n      this.register_events(index, itemdata, quizhelper);\n      this.init_components(index, itemdata, quizhelper);\n    },\n    next_question: function() {\n      var self = this;\n      var stepdata = {};\n      stepdata.index = self.index;\n      stepdata.hasgrade = true;\n      stepdata.totalitems = self.itemdata.correctmarks;\n      stepdata.correctitems = 0;\n      if (self.fullycorrect) {\n        stepdata.correctitems = self.itemdata.correctmarks;\n      } else if (self.partiallycorrect) {\n        stepdata.correctitems = self.itemdata.partialmarks;\n      }\n      if (stepdata.correctitems > 0) {\n        stepdata.grade = 100 * stepdata.correctitems / stepdata.totalitems;\n      }\n      log.debug('stepdata');\n      log.debug(stepdata);\n      self.quizhelper.do_next(stepdata);\n    },\n\n    /* NOT NEEDED */\n    prepare_audio: function(itemdata) {\n      // debugger;\n      $.each(itemdata.sentences, function(index, sentence) {\n        polly.fetch_polly_url(sentence.sentence, itemdata.voiceoption, itemdata.usevoice).then(function(audiourl) {\n          $(\"#\" + itemdata.uniqueid + \"_option\" + (index+1)).attr(\"data-src\", audiourl);\n        });\n      });\n    },\n\n    register_events: function(index, itemdata, quizhelper) {\n\n      var self = this;\n      self.index = index;\n      self.quizhelper = quizhelper;\n\n      $(\"#\" + itemdata.uniqueid + \"_container .minilesson_nextbutton\").on('click', function(e) {\n        self.next_question();\n      });\n\n      $(\"#\" + itemdata.uniqueid + \"_container .\" + itemdata.uniqueid + \"_option\").on('click', function(e) {\n\n        $(\".\" + itemdata.uniqueid + \"_option\").prop(\"disabled\", true);\n        $(\".\" + itemdata.uniqueid + \"_fb\").html(\"<i style='color:red;' class='fa fa-times'></i>\");\n        $(\".\" + itemdata.uniqueid + \"_option\" + itemdata.correctanswer + \"_fb\").html(\"<i style='color:green;' class='fa fa-check'></i>\");\n\n        $(\".minilesson_nextbutton\").prop(\"disabled\", true);\n        setTimeout(function() {\n          $(\".minilesson_nextbutton\").prop(\"disabled\", false);\n          self.next_question();\n        }, 2000);\n\n      });\n\n    },\n\n    init_components: function(index, itemdata, quizhelper) {\n      var app= this;\n      var sentences = itemdata.sentences;//sentence & phonetic\n      var partialresponses = itemdata.partialresponses;\n\n      log.debug('initcomponents_shortanswer');\n      log.debug(sentences);\n\n      //clean the text of any junk\n      for(var i=0;i<sentences.length;i++){\n          sentences[i].originalsentence= sentences[i].sentence;\n          sentences[i].sentence=quizhelper.cleanText(sentences[i].sentence);\n      }\n\n      for(var i=0;i<partialresponses.length;i++){\n          partialresponses[i].originalsentence= partialresponses[i].sentence;\n          partialresponses[i].sentence = quizhelper.cleanText(partialresponses[i].sentence);\n      }\n\n      var processFeedback = async function(speechtext) {\n        var cleanspeechtext = quizhelper.cleanText(speechtext);\n        var spoken = cleanspeechtext;\n\n        log.debug('speechtext:',speechtext);\n        log.debug('cleanspeechtext:',spoken);\n\n        var matched=false;\n        var percent=0;\n\n        //Similarity check by direct-match/acceptable-mistranscriptio\n        for(var x=0;x<sentences.length;x++){\n          //if this is the correct answer index, just move on\n          if(sentences[x].sentence===''){continue;}\n          var similar = quizhelper.similarity(spoken, sentences[x].sentence);\n          log.debug('JS similarity: ' + spoken + ':' + sentences[x].sentence + ':' + similar);\n          if (similar >= app.passmark ||\n              app.spokenIsCorrect(quizhelper, cleanspeechtext, sentences[x].sentence)) {\n              percent = app.process_accepted_response(itemdata, x);\n              matched=true;\n              break;\n          }//end of if similarity\n        }//end of for x\n\n        //Similarity check by phonetics(ajax)\n        //this is an expensive call since it goes out to the server and possibly to the cloud\n        if(!matched) {\n          for (x = 0; x < sentences.length; x++) {\n            var similarity = await quizhelper.checkByPhonetic(sentences[x].sentence, spoken, sentences[x].phonetic, itemdata.language);\n            log.debug(similarity, 'PHP similarity');\n            if (!similarity || similarity < app.passmark) {\n              //keep looking\n            } else {\n              matched = true;\n              log.debug('PHP similarity: ' + spoken + similarity);\n              percent = app.process_accepted_response(itemdata, x);\n              break;\n            }\n          }//end of Similarity check by phonetics(ajax) loop\n        }\n\n        //we do not do a passage match check , but this is how we would ..\n        if(!matched ) {\n          for (x = 0; x < sentences.length; x++) {\n            var ajaxresult = await quizhelper.comparePassageToTranscript(sentences[x].sentence, spoken, sentences[x].phonetic, itemdata.language, itemdata.alternates);\n            var result = JSON.parse(ajaxresult);\n            var haserror=false;\n            for (var i=0;i<result.length;i++){\n              if(result[i].matched===false){haserror=true;break;}\n            }\n            if(!haserror){\n              percent = app.process_accepted_response(itemdata, x);\n              matched=true;\n              break;\n            }\n          }\n        }\n        app.fullycorrect = matched;\n\n        if (!matched) {\n          //Similarity check by direct-match/acceptable-mistranscriptio\n          for(var x=0;x<partialresponses.length;x++){\n            //if this is the correct answer index, just move on\n            if(partialresponses[x].sentence===''){continue;}\n            var similar = quizhelper.similarity(spoken, partialresponses[x].sentence);\n            log.debug('JS similarity: ' + spoken + ':' + partialresponses[x].sentence + ':' + similar);\n            if (similar >= app.passmark ||\n                app.spokenIsCorrect(quizhelper, cleanspeechtext, partialresponses[x].sentence)) {\n                percent = app.process_accepted_response(itemdata, x);\n                matched=true;\n                break;\n            }//end of if similarity\n          }//end of for x\n        }\n\n        //Similarity check by phonetics(ajax)\n        //this is an expensive call since it goes out to the server and possibly to the cloud\n        if(!matched) {\n          for (x = 0; x < partialresponses.length; x++) {\n            var similarity = await quizhelper.checkByPhonetic(partialresponses[x].sentence, spoken, partialresponses[x].phonetic, itemdata.language);\n            log.debug(similarity, 'PHP similarity');\n            if (!similarity || similarity < app.passmark) {\n              //keep looking\n            } else {\n              matched = true;\n              log.debug('PHP similarity: ' + spoken + similarity);\n              percent = app.process_accepted_response(itemdata, x);\n              break;\n            }\n          }//end of Similarity check by phonetics(ajax) loop\n        }\n\n        if(!matched ) {\n          for (x = 0; x < partialresponses.length; x++) {\n            var ajaxresult = await quizhelper.comparePassageToTranscript(partialresponses[x].sentence, spoken, partialresponses[x].phonetic, itemdata.language, itemdata.alternates);\n            var result = JSON.parse(ajaxresult);\n            var haserror=false;\n            for (var i=0;i<result.length;i++){\n              if(result[i].matched===false){haserror=true;break;}\n            }\n            if(!haserror){\n              percent = app.process_accepted_response(itemdata, x);\n              matched=true;\n              break;\n            }\n          }\n        }\n\n        app.partiallycorrect = matched;\n\n          //if we got a match then process it\n        if(matched){\n          //proceed to next question\n          $(\".minilesson_nextbutton\").prop(\"disabled\", true);\n          setTimeout(function () {\n            $(\".minilesson_nextbutton\").prop(\"disabled\", false);\n            app.next_question();\n          }, 2000);\n          return;\n        }else{\n          //shake the screen\n          var theanswer = $(\"#\" + itemdata.uniqueid + \"_correctanswer\");\n          if (!itemdata.audiorecorder) {\n            theanswer = $(\"#\" + itemdata.uniqueid + \"_container .textinput_responsetype\");\n          }\n          anim.do_animate(theanswer,'rubberBand animate__faster').then(\n              function() {}\n          );\n          //$(\"#\" + itemdata.uniqueid + \"_correctanswer\").effect(\"shake\");\n        }\n      }\n\n      var theCallback = async function(message) {\n\n        switch (message.type) {\n          case 'recording':\n\n            break;\n\n          case 'speech':\n            log.debug(\"speech at shortanswer\");\n            log.debug(message.capturedspeech);\n            app.itemdata.audiotextanswer = message.capturedspeech;\n            await processFeedback(message.capturedspeech);\n        } //end of switch message type\n      }; //end of callback declaration\n\n      if (itemdata.audiorecorder) {\n        //init TT recorder\n        var opts = {};\n        opts.uniqueid = itemdata.uniqueid;\n        log.debug('sa uniqueid:' + itemdata.uniqueid);\n        opts.callback = theCallback;\n        opts.stt_guided=quizhelper.is_stt_guided();\n        app.ttrec = ttrecorder.clone();\n        app.ttrec.init(opts);\n\n        //set the prompt for TT Rec\n        var allsentences=\"\";\n        for(var i=0;i<sentences.length;i++){\n          allsentences += sentences[i].sentence + ' ';\n          sentences[i].originalsentence= sentences[i].sentence;\n          sentences[i].sentence=quizhelper.cleanText(sentences[i].sentence);\n        }\n        app.ttrec.currentPrompt=allsentences;\n      } else {\n        $(\"#\" + itemdata.uniqueid + \"_container .shortanswer_check_btn\").on('click', function(e) {\n            var textinput = $(\"#\" + itemdata.uniqueid + \"_container .textinput_responsetype\");\n            var textinputvalue = textinput.val();\n            if (!textinputvalue){\n              return;\n            }\n            processFeedback(textinputvalue);\n        });\n      }\n\n    } ,//end of init components\n\n    spokenIsCorrect: function(quizhelper, phraseheard, currentphrase) {\n      //lets lower case everything\n      phraseheard = quizhelper.cleanText(phraseheard);\n      currentphrase = quizhelper.cleanText(currentphrase);\n      if (phraseheard === currentphrase) {\n        return true;\n      }\n      return false;\n    },\n\n    process_accepted_response: function(itemdata, sentenceindex){\n      var percent = sentenceindex >= 0 ? itemdata.correctmarks : 0;\n      //TO DO .. disable TT recorder here\n      //disable TT recorder\n\n      if(percent > 0) {\n        //turn dots into text (if they were dots)\n        if (parseInt(itemdata.show_text) === 0) {\n          for (var i = 0; i < itemdata.sentences.length; i++) {\n            if (itemdata.audiorecorder) {\n              $(\"#\" + itemdata.uniqueid + \"_option\" + (i + 1) + ' .minilesson_sentence').text(itemdata.sentences[i].sentence);\n            }\n          }\n        }\n\n        if (itemdata.audiorecorder) {\n          //hightlight successgit cm\n          var  answerdisplay =  $(\"#\" + itemdata.uniqueid + \"_correctanswer\");\n          answerdisplay.text(itemdata.audiotextanswer);\n          answerdisplay.addClass(\"minilesson_success\");\n        } else {\n          var textinput = $(\"#\" + itemdata.uniqueid + \"_container .textinput_responsetype\");\n          textinput.addClass('textinput_success');\n        }\n      }\n\n      return percent;\n\n    },\n\n  };\n});"],"names":["define","$","log","def","polly","ttrecorder","anim","debug","ttrec","passmark","fullycorrect","partiallycorrect","clone","extend","this","init","index","itemdata","quizhelper","animopts","useanimatecss","register_events","init_components","next_question","stepdata","hasgrade","totalitems","correctmarks","correctitems","partialmarks","grade","do_next","prepare_audio","each","sentences","sentence","fetch_polly_url","voiceoption","usevoice","then","audiourl","uniqueid","attr","self","on","e","prop","html","correctanswer","setTimeout","app","partialresponses","i","length","originalsentence","cleanText","processFeedback","async","speechtext","cleanspeechtext","spoken","matched","x","similar","similarity","spokenIsCorrect","process_accepted_response","checkByPhonetic","phonetic","language","ajaxresult","comparePassageToTranscript","alternates","result","JSON","parse","haserror","theanswer","audiorecorder","do_animate","opts","callback","message","type","capturedspeech","audiotextanswer","stt_guided","is_stt_guided","allsentences","currentPrompt","textinputvalue","val","phraseheard","currentphrase","sentenceindex","percent","parseInt","show_text","text","answerdisplay","addClass"],"mappings":"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"}