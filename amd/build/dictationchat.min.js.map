{"version":3,"sources":["../src/dictationchat.js"],"names":["define","$","log","ajax","def","polly","anim","debug","clone","extend","usevoice","init","index","itemdata","quizhelper","self","useanimatecss","register_events","setvoice","getItems","next_question","stepdata","hasgrade","totalitems","items","length","correctitems","filter","e","correct","grade","Math","round","do_next","uniqueid","on","start","game","pointer","audio","load","play","prop","text","prompt","each","realidx","data","dictate_targetWord","dictate_targetWords","val","setTimeout","answered","nextPrompt","end","check_answer","which","target","srcElement","maxLength","parseInt","attributes","value","myLength","key","next","parent","children","focus","previous","prev","passage","transcriptArray","push","trim","transcript","join","getComparison","comparison","gotComparison","voiceoption","text_items","sentences","map","sentence","split","spliton_regexp","displayprompt","typed","item","fetch_polly_url","then","audiourl","Audio","src","appReady","console","hide","show","removeClass","allCorrect","matched","addClass","forEach","obj","wordnumber","thereply","do_animate","getWords","thetext","toLowerCase","chunks","words","i","match","callback","comparePassageToTranscript","language","ajaxresult","payloadobject","JSON","parse","spoken","nopunc","replace","nopunc_regexp","dots","nonspaces_regexp","code","html","color","progress","idx","newprompt","nextReply","dictate_targetWordsCode","word","append","newreply","first","trigger"],"mappings":"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","sourcesContent":["define(['jquery',\n  'core/log',\n  'core/ajax',\n  'mod_minilesson/definitions',\n  'mod_minilesson/pollyhelper',\n  'mod_wordcards/animatecss'\n    ], function($, log, ajax, def, polly, anim) {\n  \"use strict\"; // jshint ;_;\n\n  log.debug('MiniLesson dictation chat: initialising');\n\n  return {\n\n      //for making multiple instances\n      clone: function () {\n          return $.extend(true, {}, this);\n      },\n\n      usevoice: 'Amy',\n\n      init: function(index, itemdata, quizhelper) {\n        var self = this;\n        self.itemdata = itemdata;\n        self.quizhelper = quizhelper;\n        self.index = index;\n\n        //anim\n        var animopts = {};\n        animopts.useanimatecss=true;\n        anim.init(animopts);\n\n        self.register_events();\n        self.setvoice();\n        self.getItems();\n\n    },\n    next_question:function(){\n      var self=this;\n      var stepdata = {};\n      stepdata.index = self.index;\n      stepdata.hasgrade = true;\n      stepdata.totalitems=self.items.length;\n      stepdata.correctitems=self.items.filter(function(e) {return e.correct;}).length;\n      stepdata.grade = Math.round((stepdata.correctitems/stepdata.totalitems)*100);\n      self.quizhelper.do_next(stepdata);\n    },\n\n    register_events: function() {\n\n      var self = this;\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .minilesson_nextbutton\").on('click', function(e) {\n        self.next_question();\n      });\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_start_btn\").on(\"click\", function() {\n        self.start();\n      });\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_listen_btn\").on(\"click\", function() {\n        self.items[self.game.pointer].audio.load();\n        self.items[self.game.pointer].audio.play();\n      });\n\n      //on skip button click\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_skip_btn\").on(\"click\", function() {\n        //disable buttons\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_ctrl-btn\").prop(\"disabled\", true);\n        //reveal prompt\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_speech.dictate_teacher_left\").text(self.items[self.game.pointer].prompt + \"\");\n        //reveal answers\n        //reveal the answer\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_targetWord\").each(function() {\n          var realidx = $(this).data(\"realidx\");\n          var dictate_targetWord = self.items[self.game.pointer].dictate_targetWords[realidx];\n          $(this).val(dictate_targetWord);\n        });\n\n\n          //move on after short time, to next prompt, or next question\n          if (self.game.pointer < self.items.length - 1) {\n            setTimeout(function() {\n              self.items[self.game.pointer].answered = true;\n              self.items[self.game.pointer].correct = false;\n              self.game.pointer++;\n              self.nextPrompt();\n            }, 3000);\n          } else {\n            self.end();\n          }\n      });\n\n      \n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_check_btn\").on(\"click\", function() {\n        self.check_answer();\n      });\n\n      //listen for enter key\n      $(\"#\" + self.itemdata.uniqueid + \"_container\").on(\"keydown\",\".dictate_targetWord\", function(e) {\n        if (e.which == 13) {\n          self.check_answer();\n        }\n      });\n\n      //auto nav between inputs\n      $(\"#\" + self.itemdata.uniqueid + \"_container\").on(\"keyup\",\".dictate_targetWord\", function(e) {\n\n        //move focus between textboxes\n        //log.debug(e);\n        var target = e.srcElement || e.target;\n        var maxLength = parseInt(target.attributes[\"maxlength\"].value, 10);\n        var myLength = target.value.length;\n        var key = e.which;\n        if (myLength >= maxLength) {\n          var next = $(this);\n          while (next = next.parent().next().children('input.dictate_targetWord')) {\n            if (next.length === 1){\n              next.focus();\n              break;\n            }else{\n              break;\n\n            }\n          }\n          // Move to previous field if empty (user pressed backspace or delete)\n        } else if (( key == 8 || key == 46 ) && myLength === 0) {\n          var previous = $(this);\n          while (previous = previous.parent().prev().children('input.dictate_targetWord')) {\n            if (previous.length === 1) {\n              previous.focus();\n              break;\n            }else{\n              break;\n            }\n          }\n        }\n      });\n      \n    },\n\n    game: {\n      pointer: 0\n    },\n\n    check_answer: function(){\n      var self = this;\n      var passage = self.items[self.game.pointer].target;\n      var transcriptArray = [];\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_targetWord\").each(function() {\n        transcriptArray.push($(this).val().trim() == \"\" ? \"|\" : $(this).val().trim());\n      });\n\n      var transcript = transcriptArray.join(\" \");\n\n      self.getComparison(passage, transcript, function(comparison) {\n        self.gotComparison(comparison, transcript);\n      });\n    },\n    setvoice: function() {\n        var self = this;\n        self.usevoice = self.itemdata.usevoice;\n        self.voiceoption=self.itemdata.voiceoption;\n        return;\n    },\n    getItems: function() {\n      var self = this;\n      var text_items = self.itemdata.sentences;\n\n      self.items = text_items.map(function(target) {\n        return {\n          dictate_targetWords: target.sentence.trim().split(self.quizhelper.spliton_regexp).filter(function(e) {\n            return e !== \"\";\n          }),\n          target: target.sentence,\n          prompt: target.prompt,\n          displayprompt: target.displayprompt,\n          typed: \"\",\n          answered: false,\n          correct: false,\n          audio: null\n        };\n      }).filter(function(e) {\n        return e.target !== \"\";\n      });\n\n      $.each(self.items, function(index, item) {\n        polly.fetch_polly_url(item.prompt,  self.voiceoption, self.usevoice).then(function(audiourl) {\n          item.audio = new Audio();\n          item.audio.src = audiourl;\n          if (self.items.filter(function(e) {\n              return e.audio == null\n            }).length == 0) {\n            self.appReady();\n          } else {\n            console.log(self.items);\n          }\n        });\n\n      });\n\n    },\n    appReady: function() {\n      var self = this;\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_not_loaded\").hide();\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_loaded\").show();\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_start_btn\").prop(\"disabled\", false);\n    },\n    gotComparison: function(comparison, typed) {\n\n      var self = this;\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_targetWord\").removeClass(\"dictate_correct dictate_incorrect\");\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_feedback\").removeClass(\"fa fa-check fa-times\");\n\n      var allCorrect = comparison.filter(function(e) {\n        return !e.matched;\n      }).length == 0;\n\n      if (allCorrect) {\n\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_targetWord\").addClass(\"dictate_correct\").prop(\"disabled\",true);\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_feedback\").addClass(\"fa fa-check\");\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_speech.dictate_teacher_left\").text(self.items[self.game.pointer].target + \"\");\n\n        self.items[self.game.pointer].answered = true;\n        self.items[self.game.pointer].correct = true;\n        self.items[self.game.pointer].typed = typed;\n\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_ctrl-btn\").prop(\"disabled\", true);\n        if (self.game.pointer < self.items.length - 1) {\n          setTimeout(function() {\n            self.game.pointer++;\n            self.nextPrompt();\n          }, 2200);\n        } else {\n            self.end();\n        }\n\n      } else {\n\n        comparison.forEach(function(obj) {\n          if (!obj.matched) {\n            $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_targetWord[data-idx='\" + obj.wordnumber + \"']\").addClass(\"dictate_incorrect\");\n            $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_feedback[data-idx='\" + obj.wordnumber + \"']\").addClass(\"fa fa-times\");\n          } else {\n            $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_targetWord[data-idx='\" + obj.wordnumber + \"']\").addClass(\"dictate_correct\").prop(\"disabled\",true);\n            $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_feedback[data-idx='\" + obj.wordnumber + \"']\").addClass(\"fa fa-check\");\n          }\n        });\n        var thereply = $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_reply_\" + self.game.pointer);\n        anim.do_animate(thereply,'shakeX animate__faster').then(\n            function() {$(\"#\" + self.itemdata.uniqueid + \"_container .dictate_ctrl-btn\").prop(\"disabled\", false);}\n        );\n        /*\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_reply_\" + self.game.pointer).effect(\"shake\", function() {\n          $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_ctrl-btn\").prop(\"disabled\", false);\n        }\n        );\n        */\n\n      }\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_targetWord.dictate_correct\").each(function() {\n        var realidx = $(this).data(\"realidx\");\n        var dictate_targetWord = self.items[self.game.pointer].dictate_targetWords[realidx];\n        $(this).val(dictate_targetWord);\n      });\n\n    },\n    getWords: function(thetext) {\n      var self = this;\n      var checkcase = false;\n      if (checkcase == 'false') {\n        thetext = thetext.toLowerCase();\n      }\n      var chunks = thetext.split(self.quizhelper.spliton_regexp).filter(function(e) {\n        return e !== \"\";\n      });\n      var words = [];\n      for (var i = 0; i < chunks.length; i++) {\n        if (!chunks[i].match(self.quizhelper.spliton_regexp)) {\n          words.push(chunks[i]);\n        }\n      }\n      return words;\n    },\n    getComparison: function(passage, transcript, callback) {\n        var self = this;\n\n        $(\".dictate_ctrl-btn\").prop(\"disabled\", true);\n        var phonetic ='';//we do not want a phonetic match in dictation.\n        self.quizhelper.comparePassageToTranscript(passage,transcript,phonetic,self.itemdata.language).then(function(ajaxresult) {\n            var payloadobject = JSON.parse(ajaxresult);\n            if (payloadobject) {\n                callback(payloadobject);\n            } else {\n                callback(false);\n            }\n        });\n\n    },\n\n    end: function() {\n      var self = this;\n      $(\".minilesson_nextbutton\").prop(\"disabled\",true);\n      setTimeout(function() {\n        $(\".minilesson_nextbutton\").prop(\"disabled\",false);\n        self.next_question();\n      }, 2200);\n    },\n\n    start: function() {\n      var self = this;\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_ctrl-btn\").prop(\"disabled\", true);\n\n      self.items.forEach(function(item) {\n        item.spoken = \"\";\n        item.answered = false;\n        item.correct = false;\n      });\n\n      self.game.pointer = 0;\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_game\").show();\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_start_btn\").hide();\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_mainmenu\").hide();\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_controls\").show();\n\n      self.nextPrompt();\n\n    },\n    nextPrompt: function() {\n\n      var self = this;\n      var target = self.items[self.game.pointer].target;\n      var prompt = self.items[self.game.pointer].prompt;\n      var displayprompt = self.items[self.game.pointer].displayprompt;\n\n      var nopunc = prompt.replace(self.quizhelper.nopunc_regexp,\"\");\n      var dots = nopunc.replace(self.quizhelper.nonspaces_regexp, 'â€¢');\n      var code = \"<div class='dictate_prompt dictate_prompt_\" + self.game.pointer + \"' style='display:none;'>\";\n\n      code += \"<i class='fa fa-graduation-cap dictate_speech-icon-left'></i>\";\n      code += \"<div style='margin-left:90px;' class='dictate_speech dictate_teacher_left'>\";\n      code += dots;\n      code += \"</div>\";\n      code += \"</div>\";\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_game\").html(code);\n      $(\".dictate_ctrl-btn\").prop(\"disabled\", false);\n\n      var color;\n\n      var progress = self.items.map(function(item, idx) {\n        color = \"gray\";\n        if (self.items[idx].answered && self.items[idx].correct) {\n          color = \"green\";\n        } else if (self.items[idx].answered && !self.items[idx].correct) {\n          color = \"red\";\n        }\n        return \"<i style='color:\" + color + \"' class='fa fa-circle'></i>\";\n      }).join(\" \");\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_title\").html(progress);\n      var newprompt = $(\".dictate_prompt_\" + self.game.pointer);\n      newprompt.show();\n      anim.do_animate(newprompt,'zoomIn animate__faster','in').then(\n          function(){}\n      );\n      /*\n      $(\".dictate_prompt_\" + self.game.pointer).toggle(\"slide\", {\n        direction: 'left'\n      });\n       */\n\n      self.nextReply();\n\n    },\n    nextReply: function() {\n      var self = this;\n      var target = self.items[self.game.pointer].target;\n      var code = \"<div class='dictate_reply dictate_reply_\" + self.game.pointer + \"' style='display:none;'>\";\n      code += \"<i class='fa fa-user dictate_speech-icon-right'></i>\";\n      var dictate_targetWordsCode = \"\";\n      var idx = 1;\n      self.items[self.game.pointer].dictate_targetWords.forEach(function(word, realidx) {\n        if (!word.match(self.quizhelper.spliton_regexp)) {\n          dictate_targetWordsCode += \"<ruby><input type='text' maxlength='\" + word.length + \"' size='\" + (word.length + 1) + \"' class='dictate_targetWord' data-realidx='\" + realidx + \"' data-idx='\" + idx + \"'><rt><i data-idx='\" + idx + \"' class='dictate_feedback'></i></rt></ruby>\";\n          idx++;\n        } else {\n          dictate_targetWordsCode += word;\n        }\n      });\n      code += \"<div style='margin-right:90px;' class='dictate_speech dictate_right'>\" + dictate_targetWordsCode + \"</div>\";\n      code += \"</div>\";\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_game\").append(code);\n      var newreply = $(\".dictate_reply_\" + self.game.pointer);\n      newreply.show();\n      anim.do_animate(newreply,'zoomIn animate__faster','in').then(\n          function(){}\n      );\n      /*\n      $(\".dictate_reply_\" + self.game.pointer).toggle(\"slide\", {\n        direction: 'right'\n      });\n       */\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_ctrl-btn\").prop(\"disabled\", false);\n      setTimeout(function() {\n        $(\".dictate_targetWord\").first().focus();\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_listen_btn\").trigger('click');\n      }, 500);\n    }\n\n  };\n});"],"file":"dictationchat.min.js"}