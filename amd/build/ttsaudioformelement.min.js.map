{"version":3,"file":"ttsaudioformelement.min.js","sources":["../src/ttsaudioformelement.js"],"sourcesContent":["import Log from \"core/log\";\nimport Config from \"core/config\";\nimport Fragment from \"core/fragment\";\nimport Templates from \"core/templates\";\n\nconst regionSelector = regionname => `[data-region=\"${regionname}\"]`;\n\nexport const registerElement = ({component, fragmentcallback, elementid}) => {\n    const element = document.getElementById(elementid);\n    if (element) {\n        Log.debug(element);\n        element.addEventListener('change', () => {\n            const rootelement = element.closest('[data-root=\"elementwrapper\"]');\n            const loaderElement = rootelement.querySelector(regionSelector('overlay-icon-container'));\n            const params = {...element.dataset};\n            const formdata = new FormData;\n            params.options = JSON.stringify({...rootelement.dataset});\n            rootelement.querySelectorAll('select').forEach(selectel => {\n                if (selectel instanceof HTMLSelectElement) {\n                    [...selectel.selectedOptions].forEach(option => {\n                        formdata.append(selectel.getAttribute('name'), option.value);\n                    });\n                }\n            });\n            params.formdata = new URLSearchParams([...formdata.entries()]).toString();\n            if (loaderElement) {\n                loaderElement.classList.remove('hidden');\n            }\n            Fragment.loadFragment(component, fragmentcallback, Config.contextid, params)\n            .then((html, js) => {\n                Templates.replaceNode(rootelement, html, js);\n            });\n        });\n    }\n};"],"names":["_ref","component","fragmentcallback","elementid","element","document","getElementById","debug","addEventListener","rootelement","closest","loaderElement","querySelector","params","dataset","formdata","FormData","options","JSON","stringify","querySelectorAll","forEach","selectel","HTMLSelectElement","selectedOptions","option","append","getAttribute","value","URLSearchParams","entries","toString","classList","remove","loadFragment","Config","contextid","then","html","js","replaceNode"],"mappings":"+gBAO+BA,WAACC,UAACA,UAADC,iBAAYA,iBAAZC,UAA8BA,sBACpDC,QAAUC,SAASC,eAAeH,WACpCC,uBACIG,MAAMH,SACVA,QAAQI,iBAAiB,UAAU,WACzBC,YAAcL,QAAQM,QAAQ,gCAC9BC,cAAgBF,YAAYG,sCAA6B,sCACzDC,OAAS,IAAIT,QAAQU,SACrBC,SAAW,IAAIC,SACrBH,OAAOI,QAAUC,KAAKC,UAAU,IAAIV,YAAYK,UAChDL,YAAYW,iBAAiB,UAAUC,SAAQC,WACvCA,oBAAoBC,uBAChBD,SAASE,iBAAiBH,SAAQI,SAClCV,SAASW,OAAOJ,SAASK,aAAa,QAASF,OAAOG,aAIlEf,OAAOE,SAAW,IAAIc,gBAAgB,IAAId,SAASe,YAAYC,WAC3DpB,eACAA,cAAcqB,UAAUC,OAAO,4BAE1BC,aAAajC,UAAWC,iBAAkBiC,gBAAOC,UAAWvB,QACpEwB,MAAK,CAACC,KAAMC,yBACCC,YAAY/B,YAAa6B,KAAMC"}