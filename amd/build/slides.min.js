define(["jquery","core/log","mod_minilesson/definitions","./reveal","core/str","core/modal_factory","core/fragment"],(function($,log,def,RevealImplement,Str,ModalFactory,Fragment){return log.debug("MiniLesson Slides: initialising"),{instance:null,itemdata:{},clone:function(){return $.extend(!0,{},this)},init:function(index,itemdata,quizhelper){this.itemdata=itemdata,this.register_events(index,itemdata,quizhelper)},prepare_html:function(itemdata){},register_events:function(index,itemdata,quizhelper){var self=this;$("#"+itemdata.uniqueid+"_container .minilesson_nextbutton").on("click",(function(e){var stepdata={};stepdata.index=index,stepdata.hasgrade=!1,stepdata.totalitems=0,stepdata.correctitems=0,stepdata.grade=0,quizhelper.do_next(stepdata)})),$("#"+itemdata.uniqueid+"_container").on("showElement",(async e=>{self.instance||(self.instance=await RevealImplement.init(e.target.querySelector(".reveal"),itemdata.region,itemdata.selectedtheme),self.instance.initialize()),itemdata.timelimit>0&&($("#"+itemdata.uniqueid+"_container .progress-container").show(),$("#"+itemdata.uniqueid+"_container .progress-container i").show(),$("#"+itemdata.uniqueid+"_container .progress-container #progresstimer").progressTimer({height:"5px",timeLimit:itemdata.timelimit,onFinish:function(){$("#"+itemdata.uniqueid+"_container .minilesson_nextbutton").trigger("click")}}))}))},register_previewbutton:function(buttonid){var previewbtn=document.getElementById(buttonid);if(previewbtn&&(previewbtn.addEventListener("click",(function(e){e.preventDefault();var form=previewbtn.form;form&&ModalFactory.create({type:ModalFactory.types.CANCEL,large:!0,removeOnClose:!0,templateContext:{classes:"minilesson-slides-preview-modal"},title:Str.get_string("slides:previewmodaltitle","mod_minilesson"),body:Fragment.loadFragment("mod_minilesson","preview_slides",M.cfg.contextid,{formdata:new URLSearchParams([...new FormData(form).entries()]).toString()})}).then((function(modal){modal.getFooter().addClass("d-none"),modal.show()}))})),previewbtn.form)){const themeselect=previewbtn.form.querySelector('[data-control="theme"]');themeselect&&(themeselect.addEventListener("change",(function(e){RevealImplement.setTheme(e.target.value)})),RevealImplement.setTheme(themeselect.value))}}}}));

//# sourceMappingURL=slides.min.js.map