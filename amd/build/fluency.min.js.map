{"version":3,"file":"fluency.min.js","sources":["../src/fluency.js"],"sourcesContent":["define(['jquery', 'core/log', 'mod_minilesson/definitions','mod_minilesson/pollyhelper','mod_minilesson/cloudpoodllloader',\n    'mod_minilesson/ttrecorder', 'mod_minilesson/animatecss',\n    'mod_minilesson/progresstimer', 'core/templates', 'core/chartjs'],\n    function($, log, def,polly, cloudpoodll, ttrecorder,anim, progresstimer, templates, chartjs) {\n  \"use strict\"; // jshint ;_;\n\n  /*\n  This file is to manage the fluency item type\n   */\n\n  log.debug('MiniLesson Fluency: initialising');\n\n  return {\n\n    speechConfig: null,\n    //this is just a placeholder for the actualtext which is from the sentences in items\n    referencetext: 'I met my love by the gas works wall',\n    game: {pointer: 0},\n    usevoice: '',\n    items: null,\n\n    //for making multiple instances\n      clone: function () {\n          return $.extend(true, {}, this);\n     },\n\n    init: function(index, itemdata, quizhelper) {\n      this.itemdata = itemdata;\n      this.quizhelper = quizhelper;\n      this.init_components(quizhelper, itemdata);\n\n      // Anim\n      var animopts = {};\n      animopts.useanimatecss = quizhelper.useanimatecss;\n      anim.init(animopts);\n\n      //Events and voice and items parse\n      this.register_events(index, itemdata, quizhelper);\n      this.setvoice();\n      this.getItems();\n    },\n\n    init_components: function(quizhelper,itemdata){\n      var self=this;\n\n      self.thebutton = \"thettrbutton\"; // To Do impl. this\n      self.wordcount = $(\"#\" + self.itemdata.uniqueid + \"_container span.ml_wordcount\");\n      self.actionbox = $(\"#\" + self.itemdata.uniqueid + \"_container div.ml_fluency_actionbox\");\n      self.pendingbox = $(\"#\" + self.itemdata.uniqueid + \"_container div.ml_fluency_pendingbox\");\n      self.resultsbox = $(\"#\" + self.itemdata.uniqueid + \"_container div.ml_fluency_resultsbox\");\n      self.timerdisplay = $(\"#\" + self.itemdata.uniqueid + \"_container div.ml_fluency_timerdisplay\");\n      self.audioplayerbtn =$(\"#\" + self.itemdata.uniqueid + \"_container .fluency_listen_btn\");\n      self.skipbtn = $(\"#\" + self.itemdata.uniqueid + \"_container .fluency_skip_btn\");\n      self.startbtn = $(\"#\" + self.itemdata.uniqueid + \"_container .fluency_start_btn\");\n      self.smallnextbtn = $(\"#\" + self.itemdata.uniqueid + \"_container .minilesson_nextbutton\");\n      self.bignextbtn = $(\".minilesson_nextbutton\");\n      self.ctrlbtns =  $(\"#\" + self.itemdata.uniqueid + \"_container .fluency_ctrl_btn\");\n      self.speakbtncont = $(\"#\" + self.itemdata.uniqueid + \"_container .fluency_speakbtncontainer\");\n      self.questioncont = $(\"#\" + self.itemdata.uniqueid + \"_container .question\");\n      self.listencont = $(\"#\" + self.itemdata.uniqueid + \"_container .fluency_listen_cont\");\n      self.mainmenu = $(\"#\" + self.itemdata.uniqueid + \"_container .fluency_mainmenu\");\n      self.controls = $(\"#\" + self.itemdata.uniqueid + \"_container .fluency_controls\");\n      self.progresscont = $(\"#\" + self.itemdata.uniqueid + \"_container .progress-container\");\n      self.itemresultscont = $(\"#\" + self.itemdata.uniqueid + \"_container .item-results-container\");\n\n      // Callback: Recorder updates.\n      var recorderCallback = function(message) {\n\n        switch (message.type) {\n          case 'recording':\n            break;\n\n          case 'pronunciation_results':\n            var speechresults= message.results;\n            self.do_evaluation(speechresults);    \n        } //end of switch message type\n      };\n\n      if(quizhelper.use_ttrecorder()) {\n          //init tt recorder\n          var opts = {};\n          opts.uniqueid = itemdata.uniqueid;\n          opts.callback = recorderCallback;\n          opts.stt_guided=false;\n          opts.referencetext=this.referencetext;\n          self.ttrec = ttrecorder.clone();\n          self.ttrec.init(opts);\n\n      }else{\n          //init cloudpoodll push recorder\n          cloudpoodll.init('minilesson-recorder-fluency-' + itemdata.id, recorderCallback);\n      }\n    }, //end of init components\n\n    setvoice: function() {\n            var self = this;\n            self.usevoice = self.itemdata.usevoice;\n            self.voiceoption=self.itemdata.voiceoption;\n            return;\n    },\n\n    getItems: function() {\n      var self = this;\n      var text_items = self.itemdata.sentences;\n\n      self.items = text_items.map(function(target) {\n          return {\n              target: target.sentence,\n              prompt: target.prompt,\n              parsedstring: target.parsedstring,\n              displayprompt: target.displayprompt,\n              definition: target.definition,\n              phonetic: target.phonetic,\n              words: target.words,\n              typed: \"\",\n              timer: [],\n              answered: false,\n              correct: false,\n              audio: null\n          };\n      }).filter(function(e) {\n          return e.target !== \"\";\n      });\n\n\n      $.each(self.items, function(index, item) {\n        polly.fetch_polly_url(item.prompt,  self.voiceoption, self.usevoice).then(function(audiourl) {\n          item.audio = new Audio();\n          item.audio.src = audiourl;\n          if (self.items.filter(function(e) {\n              return e.audio === null;\n            }).length === 0) {\n            self.appReady();\n          }\n        });\n      });\n    },\n\n    appReady: function() {\n      var self = this;\n      $(\"#\" + self.itemdata.uniqueid + \"_container .fluency_not_loaded\").hide();\n      $(\"#\" + self.itemdata.uniqueid + \"_container .fluency_loaded\").show();\n      if(self.itemdata.hidestartpage){\n          self.start();\n      }else{\n          $(\"#\" + self.itemdata.uniqueid + \"_container .fluency_start_btn\").prop(\"disabled\", false);\n      }\n  },\n\n    next_question: function(percent) {\n      var self = this;\n      var stepdata = {};\n      stepdata.index = self.index;\n      stepdata.hasgrade = true;\n      stepdata.totalitems = 1;\n      stepdata.correctitems = percent>0?1:0;\n      stepdata.grade = percent;\n      self.quizhelper.do_next(stepdata);\n    },\n\n    register_events: function(index, itemdata, quizhelper) {\n      \n      var self = this;\n      // On next button click\n      self.bignextbtn.on('click', function(e) {\n          self.next_question(0);\n      });\n\n      // On start button click\n      self.startbtn.on(\"click\", function() {\n          self.start();\n      });\n\n      //AUDIO PLAYER Button events\n      // On listen button click\n      if(self.itemdata.readsentence) {\n          self.audioplayerbtn.on(\"click\", function () {\n              var theaudio = self.items[self.game.pointer].audio;\n\n              //if we are already playing stop playing\n              if(!theaudio.paused){\n                  theaudio.pause();\n                  theaudio.currentTime=0;\n                  $(self.audioplayerbtn).children('.fa').removeClass('fa-stop');\n                  $(self.audioplayerbtn).children('.fa').addClass('fa-volume-up');\n                  return;\n              }\n\n              //change icon to indicate playing state\n              theaudio.addEventListener('ended', function () {\n                  $(self.audioplayerbtn).children('.fa').removeClass('fa-stop');\n                  $(self.audioplayerbtn).children('.fa').addClass('fa-volume-up');\n              });\n\n              theaudio.addEventListener('play', function () {\n                  $(self.audioplayerbtn).children('.fa').removeClass('fa-volume-up');\n                  $(self.audioplayerbtn).children('.fa').addClass('fa-stop');\n              });\n              theaudio.load();\n              theaudio.play();\n          });\n      }\n\n      // On skip button click\n      self.skipbtn.on(\"click\", function() {\n          // Disable all the control buttons\n         self.ctrlbtns.prop(\"disabled\", true);\n          // Reveal the prompt\n          $(\"#\" + self.itemdata.uniqueid + \"_container .fluency_speech.fluency_teacher_left\").text(self.items[self.game.pointer].prompt + \"\");\n          // Reveal the answer\n          var targetwords =  $(\"#\" + self.itemdata.uniqueid + \"_container .fluency_targetWord\");\n          targetwords.each(function() {\n              var realidx = $(this).data(\"realidx\");\n              var fluency_targetWord = self.items[self.game.pointer].fluency_targetWords[realidx];\n              $(this).val(fluency_targetWord);\n          });\n\n          self.stopTimer(self.items[self.game.pointer].timer);\n\n          //mark as answered and incorrect\n          self.items[self.game.pointer].answered = true;\n          self.items[self.game.pointer].correct = false;\n\n          if (self.game.pointer < self.items.length - 1) {\n              // Move on after short time to next prompt\n              setTimeout(function() {\n                  $(\".fluency_reply_\" + self.game.pointer).hide();\n                  self.game.pointer++;\n                  self.nextPrompt();\n              }, 2000);\n              // End question\n          } else {\n              self.end();\n          }\n      });\n    },\n\n    end: function() {\n      var self = this;\n      self.bignextbtn.prop(\"disabled\", true);\n\n      //progress dots are updated on next_item. The last item has no next item, so we update from here\n      self.updateProgressDots();\n\n      setTimeout(function() {\n          self.bignextbtn.prop(\"disabled\",false);\n          if(self.quizhelper.showitemreview){\n              self.show_item_review();\n          }else{\n              self.next_question();\n          }\n      }, 2000);\n\n  },\n\n  start: function() {\n      var self = this;\n\n      self.ctrlbtns.prop(\"disabled\", true);\n      self.speakbtncont.show();\n\n      self.items.forEach(function(item) {\n          item.spoken = \"\";\n          item.answered = false;\n          item.correct = false;\n      });\n\n      self.game.pointer = 0;\n\n      self.questioncont.show();\n      if(self.itemdata.readsentence) {\n          self.listencont.show();\n      }\n      self.startbtn.hide();\n      self.mainmenu.hide();\n      self.controls.show();\n\n      self.nextPrompt();\n  },\n\n  updateProgressDots: function(){\n      var self = this;\n      var color;\n      var progress = self.items.map(function(item, idx) {\n          color = \"gray\";\n          if (self.items[idx].answered && self.items[idx].correct) {\n              color = \"green\";\n          } else if (self.items[idx].answered && !self.items[idx].correct) {\n              color = \"red\";\n          }\n          return \"<i style='color:\" + color + \"' class='fa fa-circle'></i>\";\n      }).join(\" \");\n      $(\"#\" + self.itemdata.uniqueid + \"_container .fluency_title\").html(progress);\n  },\n\n  nextPrompt: function() {\n      var self = this;\n      self.ctrlbtns.prop(\"disabled\", false);\n      self.updateProgressDots();\n      var newprompt = $(\".fluency_prompt_\" + self.game.pointer);\n      anim.do_animate(newprompt, 'zoomIn animate__faster', 'in').then(\n          function() {\n          }\n      );\n      self.nextReply();\n  },\n  \n\n  nextReply: function() {\n      var self = this;\n\n      var code = \"<div class='fluency_reply fluency_reply_\" + self.game.pointer + \" text-center' style='display:none;'>\";\n\n      code += \"<div class='form-container'>\";\n      self.items[self.game.pointer].parsedstring.forEach(function(data, index) {\n          if (data.type === 'input') {\n              code += \"<input class='single-character' autocomplete='off' type='text' name='filltext\" + index + \"' maxlength='1' data-index='\" + index + \"' readonly>\";\n          } else if (data.type === 'mtext') {\n              code += \"<input class='single-character-mtext' type='text' name='readonly\" + index + \"' maxlength='1' value='\" + data.character + \"' readonly>\";\n          } else {\n              code += data.character;\n          }\n      });\n      //correct or not\n      code += \" <i data-idx='\" + self.game.pointer + \"' class='fluency_feedback'></i></div>\";\n\n      //definition\n      code += \"<div class='item-results-container'>\";\n      code += \"</div>\";\n\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .question\").append(code);\n      var newreply = $(\".fluency_reply_\" + self.game.pointer);\n      anim.do_animate(newreply, 'zoomIn animate__faster', 'in').then(\n          function() {\n          }\n      );\n      self.ctrlbtns.prop(\"disabled\", false);\n\n      if (self.itemdata.timelimit > 0) {\n          self.progresscont.show();\n          self.progresscont.find('i').show();\n          var progresbar = self.progresscont.find('#progresstimer').progressTimer({\n              height: '5px',\n              timeLimit: self.itemdata.timelimit,\n              onFinish: function() {\n                  self.skipbtn.trigger('click');\n              }\n          });\n\n          progresbar.each(function() {\n              self.items[self.game.pointer].timer.push($(this).attr('timer'));\n          });\n      }\n\n      if (!self.quizhelper.mobile_user()) {\n          setTimeout(function() {\n              self.audioplayerbtn.trigger('click');\n          }, 1000);\n      }\n\n      //target is the speech we expect\n      var target = self.items[self.game.pointer].target;\n      //in some cases ttrecorder wants to know the target\n      if(self.quizhelper.use_ttrecorder()) {\n        self.ttrec.update_currentprompt(target);\n      }\n    },\n\n    stopTimer: function(timers) {\n      if (timers.length) {\n          timers.forEach(function(timer) {\n              clearInterval(timer);\n          });\n      }\n    },\n\n    do_evaluation: function (pronunciation_result) {\n      var self = this;\n      var itemresultscont = $(\"#\" + self.itemdata.uniqueid + \"_container .item-results-container\");\n      itemresultscont.html(\"\");\n      \n      var itemresults = [];\n\n      itemresults.push(\"Accuracy score: \" + pronunciation_result.accuracyScore);\n      itemresults.push(\"Pronunciation score: \" + pronunciation_result.pronunciationScore);\n      itemresults.push(\"Completeness score: \" + pronunciation_result.completenessScore);\n      itemresults.push(\"Fluency score: \" + pronunciation_result.fluencyScore);\n      itemresults.push(\"Prosody score: \" +  pronunciation_result.prosodyScore);\n      itemresultscont.append(itemresults.join(\"<br>\"));\n\n        //make a chart for each score\n        var labels = [\"Accuracy\", \"Pronunciation\", \"Completeness\", \"Fluency\", \"Prosody\"];\n        var data = [\n            pronunciation_result.accuracyScore,\n            pronunciation_result.pronunciationScore,\n            pronunciation_result.completenessScore,\n            pronunciation_result.fluencyScore,\n            pronunciation_result.prosodyScore\n        ];\n        labels.forEach(function(label, index) {\n            var chartContainerId = self.itemdata.uniqueid + \"_chart_\" + index;\n            itemresultscont.append('<canvas id=\"' + chartContainerId + '\"></canvas>');\n            self.createRadialChart(chartContainerId, [label], [data[index]]);\n        });\n\n      log.debug(\"Accuracy score: \", pronunciation_result.accuracyScore);\n      log.debug(\"Pronunciation score: \", pronunciation_result.pronunciationScore);\n      log.debug(\"Completeness score : \", pronunciation_result.completenessScore);\n      log.debug(\"Fluency score: \", pronunciation_result.fluencyScore);\n      log.debug(\"Prosody score: \", pronunciation_result.prosodyScore);\n      \n      log.debug(\"  Word-level details:\");\n      pronunciation_result.detailResult.Words.forEach(function (word, idx) {\n          console.log(\"    \", idx + 1, \": word: \", word.Word, \"\\taccuracy score: \", word.PronunciationAssessment.AccuracyScore, \"\\terror type: \", word.PronunciationAssessment.ErrorType, \";\");\n      });\n    },\n\n    createRadialChart: function(containerId, labels, data) {\n        var ctx = document.getElementById(containerId).getContext('2d');\n        new chartjs(ctx, {\n            type: 'doughnut',\n            data: {\n                labels: labels,\n                datasets: [{\n                    label: 'Scores',\n                    data: data,\n                    backgroundColor: 'rgba(54, 162, 235, 0.2)',\n                    borderColor: 'rgba(54, 162, 235, 1)',\n                    borderWidth: 1\n                }]\n            },\n            options: {\n                scale: {\n                    ticks: {\n                        beginAtZero: true,\n                        max: 100\n                    }\n                }\n            }\n        });\n    },\n\n  };\n});"],"names":["define","$","log","def","polly","cloudpoodll","ttrecorder","anim","progresstimer","templates","chartjs","debug","speechConfig","referencetext","game","pointer","usevoice","items","clone","extend","this","init","index","itemdata","quizhelper","init_components","animopts","useanimatecss","register_events","setvoice","getItems","self","thebutton","wordcount","uniqueid","actionbox","pendingbox","resultsbox","timerdisplay","audioplayerbtn","skipbtn","startbtn","smallnextbtn","bignextbtn","ctrlbtns","speakbtncont","questioncont","listencont","mainmenu","controls","progresscont","itemresultscont","recorderCallback","message","type","speechresults","results","do_evaluation","use_ttrecorder","opts","callback","stt_guided","ttrec","id","voiceoption","text_items","sentences","map","target","sentence","prompt","parsedstring","displayprompt","definition","phonetic","words","typed","timer","answered","correct","audio","filter","e","each","item","fetch_polly_url","then","audiourl","Audio","src","length","appReady","hide","show","hidestartpage","start","prop","next_question","percent","stepdata","hasgrade","totalitems","correctitems","grade","do_next","on","readsentence","theaudio","paused","pause","currentTime","children","removeClass","addClass","addEventListener","load","play","text","realidx","data","fluency_targetWord","fluency_targetWords","val","stopTimer","setTimeout","nextPrompt","end","updateProgressDots","showitemreview","show_item_review","forEach","spoken","color","progress","idx","join","html","newprompt","do_animate","nextReply","code","character","append","newreply","timelimit","find","progressTimer","height","timeLimit","onFinish","trigger","push","attr","mobile_user","update_currentprompt","timers","clearInterval","pronunciation_result","itemresults","accuracyScore","pronunciationScore","completenessScore","fluencyScore","prosodyScore","label","chartContainerId","createRadialChart","detailResult","Words","word","console","Word","PronunciationAssessment","AccuracyScore","ErrorType","containerId","labels","ctx","document","getElementById","getContext","datasets","backgroundColor","borderColor","borderWidth","options","scale","ticks","beginAtZero","max"],"mappings":"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"}