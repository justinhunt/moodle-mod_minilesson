{"version":3,"file":"progresstimer.min.js","sources":["../src/progresstimer.js"],"sourcesContent":["/* jshint ignore:start */\n// Uses CommonJS, AMD or browser globals to create a jQuery plugin.\n(function(factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['jquery'], factory);\n    } else if (typeof module === 'object' && module.exports) {\n        // Node/CommonJS\n        module.exports = function(root, jQuery) {\n            if (jQuery === undefined) {\n                // require('jQuery') returns a factory that requires window to\n                // build a jQuery instance, we normalize how we use modules\n                // that require this pattern but the window provided is a noop\n                // if it's defined (how jquery works)\n                if (typeof window !== 'undefined') {\n                    jQuery = require('jquery');\n                }\n                else {\n                    jQuery = require('jquery')(root);\n                }\n            }\n            factory(jQuery);\n            return jQuery;\n        };\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n}(function ($) {\n    $.fn.progressTimer = function (options) {\n        var settings = $.extend({}, $.fn.progressTimer.defaults, options);\n\n        this.each(function () {\n            $(this).empty();\n            var barContainer = $(\"<div>\").addClass(\"progress active\").css('height', settings.height);\n            var bar = $(\"<div>\").addClass(\"progress-bar\").addClass(settings.baseStyle)\n                .attr(\"role\", \"progressbar\")\n                .attr(\"aria-valuenow\", \"0\")\n                .attr(\"aria-valuemin\", \"0\")\n                .attr(\"aria-valuemax\", settings.timeLimit);\n\n            bar.appendTo(barContainer);\n            barContainer.appendTo($(this));\n\n            var start = new Date();\n            var limit = settings.timeLimit * 1000;\n            var interval = window.setInterval(function () {\n                var elapsed = new Date() - start;\n                bar.width(((elapsed / limit) * 100) + \"%\");\n\n                if (limit - elapsed <= 5000) {\n                    bar.removeClass(settings.baseStyle)\n                        .removeClass(settings.completeStyle)\n                        .addClass(settings.warningStyle);\n                }\n\n                if (elapsed >= limit) {\n                    window.clearInterval(interval);\n\n                    bar.removeClass(settings.baseStyle)\n                        .removeClass(settings.warningStyle)\n                        .addClass(settings.completeStyle);\n\n                    setTimeout(() => settings.onFinish.call(this), 600);\n                }\n\n            }, 250);\n\n            $(this).attr('timer', interval);\n        });\n\n        return this;\n    };\n\n    $.fn.progressTimer.defaults = {\n        action: '',\n        height: '5px',\n        timeLimit: 60,// Total number of seconds\n        warningThreshold: 5,// Seconds remaining triggering switch to warning color\n        onFinish: function() {},// Invoked once the timer expires\n        baseStyle: 'bg-danger progress-bar progress-bar-animated',// Bootstrap progress bar style at the beginning of the timer\n        warningStyle: 'bg-danger progress-bar progress-bar-animated', // Bootstrap progress bar style in the warning phase\n        completeStyle: 'bg-danger progress-bar progress-bar-animated progress-bar-complete'// Bootstrap progress bar style at completion of timer\n    };\n}));\n/* jshint ignore:end */\n"],"names":["factory","$","fn","progressTimer","options","settings","extend","defaults","each","this","empty","barContainer","addClass","css","height","bar","baseStyle","attr","timeLimit","appendTo","start","Date","limit","interval","window","setInterval","elapsed","width","removeClass","completeStyle","warningStyle","clearInterval","setTimeout","onFinish","call","action","warningThreshold","define","amd","module","exports","root","jQuery","undefined","require"],"mappings":"AAEC,IAASA,QAAAA,QA0BR,SAAUC,GACRA,EAAEC,GAAGC,cAAgB,SAAUC,aACvBC,SAAWJ,EAAEK,OAAO,GAAIL,EAAEC,GAAGC,cAAcI,SAAUH,qBAEpDI,MAAK,WACNP,EAAEQ,MAAMC,YACJC,aAAeV,EAAE,SAASW,SAAS,mBAAmBC,IAAI,SAAUR,SAASS,QAC7EC,IAAMd,EAAE,SAASW,SAAS,gBAAgBA,SAASP,SAASW,WAC3DC,KAAK,OAAQ,eACbA,KAAK,gBAAiB,KACtBA,KAAK,gBAAiB,KACtBA,KAAK,gBAAiBZ,SAASa,WAEpCH,IAAII,SAASR,cACbA,aAAaQ,SAASlB,EAAEQ,WAEpBW,MAAQ,IAAIC,KACZC,MAA6B,IAArBjB,SAASa,UACjBK,SAAWC,OAAOC,aAAY,eAC1BC,QAAU,IAAIL,KAASD,MAC3BL,IAAIY,MAAQD,QAAUJ,MAAS,IAAO,KAElCA,MAAQI,SAAW,KACnBX,IAAIa,YAAYvB,SAASW,WACpBY,YAAYvB,SAASwB,eACrBjB,SAASP,SAASyB,cAGvBJ,SAAWJ,QACXE,OAAOO,cAAcR,UAErBR,IAAIa,YAAYvB,SAASW,WACpBY,YAAYvB,SAASyB,cACrBlB,SAASP,SAASwB,eAEvBG,YAAW,IAAM3B,SAAS4B,SAASC,KAAKzB,OAAO,QAGpD,KAEHR,EAAEQ,MAAMQ,KAAK,QAASM,aAGnBd,MAGXR,EAAEC,GAAGC,cAAcI,SAAW,CAC1B4B,OAAQ,GACRrB,OAAQ,MACRI,UAAW,GACXkB,iBAAkB,EAClBH,SAAU,aACVjB,UAAW,+CACXc,aAAc,+CACdD,cAAe,uEA/EG,mBAAXQ,QAAyBA,OAAOC,IAEvCD,sCAAO,CAAC,UAAWrC,SACM,iBAAXuC,QAAuBA,OAAOC,QAE5CD,OAAOC,QAAU,SAASC,KAAMC,oBACbC,IAAXD,SAMIA,OADkB,oBAAXlB,OACEoB,QAAQ,UAGRA,QAAQ,SAARA,CAAkBH,OAGnCzC,QAAQ0C,QACDA,QAIX1C,QAAQ0C"}