{"version":3,"sources":["../src/listenrepeat.js"],"names":["define","$","log","ajax","def","polly","ttrecorder","anim","templates","str","notification","debug","ttrec","clone","extend","init","index","itemdata","quizhelper","self","theCallback","message","type","getComparison","items","game","pointer","target","capturedspeech","phonetic","comparison","gotComparison","use_ttrecorder","opts","uniqueid","callback","stt_guided","is_stt_guided","wwwroot","cloudpoodll","id","strings","animopts","useanimatecss","init_controls","init_strings","register_events","setvoice","getItems","controls","container","nextbutton","start_btn","skip_btn","ctrl_btn","controlsbox","resultscontainer","speakbtncontainer","mainmenu","title","question","speech_container","landr_correctfeedback","landr_incorrectfeedback","landr_fbcontainer","landr_feedback","landr_listen_btn","progress_container","description","image","maintitle","get_strings","done","s","i","nextlessonitem","confirm_desc","yes","no","next_question","stepdata","hasgrade","totalitems","length","correctitems","filter","e","correct","grade","Math","round","stop_audio","do_next","show_item_review","forEach","item","itemwordlist","landr_targetWords","data","push","wordmatch","join","regex","RegExp","answerclass","result","replace","review_data","gamebox","recorderbox","resultsbox","audioplayerbtn","render","then","html","js","show","hide","runTemplateJS","on","some","answered","confirm","start","theaudio","audio","paused","pause","currentTime","children","removeClass","addClass","addEventListener","load","play","prop","find","text","displayprompt","each","realidx","landr_word_input","val","stopTimer","timer","setTimeout","nextPrompt","end","usevoice","voiceoption","text_items","sentences","map","sentence","trim","split","spliton_regexp","prompt","typed","audiourl","imageurl","Audio","src","appReady","hidestartpage","allCorrect","matched","obj","wordnumber","thereply","do_animate","getWords","thetext","toLowerCase","chunks","words","match","passage","transcript","comparePassageToTranscript","language","alternates","ajaxresult","payloadobject","JSON","parse","updateProgressDots","showitemreview","spoken","showText","parseInt","show_text","currentPrompt","nopunc","nopunc_regexp","dots","nonspaces_regexp","showprompt","newprompt","nextReply","color","icon","progress","idx","word","theword","isword","lengthplusone","displaytimer","timelimit","append","newreply","mobile_user","trigger","startTimer","doStartTimer","progresbar","progressTimer","height","timeLimit","onFinish","attr","timers","clearInterval"],"mappings":"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","sourcesContent":["define(['jquery',\n      'core/log',\n      'core/ajax',\n      'mod_minilesson/definitions',\n      'mod_minilesson/pollyhelper',\n      'mod_minilesson/ttrecorder',\n      'mod_minilesson/animatecss',\n      'core/templates',\n      'core/str',\n      'core/notification'\n    ], function($, log, ajax, def, polly, ttrecorder, anim, templates,str,notification) {\n  \"use strict\"; // jshint ;_;\n\n  log.debug('MiniLesson listen and repeat: initialising');\n\n  return {\n\n    //a handle on the tt recorder\n    ttrec: null,\n\n    //for making multiple instances\n    clone: function () {\n      return $.extend(true, {}, this);\n    },\n\n    init: function (index, itemdata, quizhelper) {\n      var self = this;\n      var theCallback = function (message) {\n\n        switch (message.type) {\n          case 'recording':\n            break;\n\n          case 'speech':\n            log.debug(\"speech at listen_repeat\");\n            //var wordcount = quizhelper.count_words(message.capturedspeech);\n            self.getComparison(\n                self.items[self.game.pointer].target,\n                message.capturedspeech,\n                self.items[self.game.pointer].phonetic,\n                function (comparison) {\n                  self.gotComparison(comparison, message);\n                }\n            );\n            break;\n\n        }\n\n      };\n\n      if (quizhelper.use_ttrecorder()) {\n        var opts = {};\n        opts.uniqueid = itemdata.uniqueid;\n        opts.callback = theCallback;\n        opts.stt_guided = quizhelper.is_stt_guided();\n        opts.wwwroot = quizhelper.is_stt_guided();\n        self.ttrec = ttrecorder.clone();\n        self.ttrec.init(opts);\n      } else {\n        //init cloudpoodll push recorder\n        cloudpoodll.init('minilesson-recorder-listenrepeat-' + itemdata.id, theCallback);\n      }\n\n      self.itemdata = itemdata;\n      self.quizhelper = quizhelper;\n      self.index = index;\n      self.strings = {};\n\n      //anim\n      var animopts = {};\n      animopts.useanimatecss = quizhelper.useanimatecss;\n      anim.init(animopts);\n\n      self.init_controls();\n      self.init_strings();\n      self.register_events();\n      self.setvoice();\n      self.getItems();\n    },\n\n    init_controls: function() {\n      var self = this;\n      self.controls = {\n        container: $(\"#\" + self.itemdata.uniqueid + \"_container\"),\n        nextbutton: $(\"#\" + self.itemdata.uniqueid + \"_container .minilesson_nextbutton\"),\n        start_btn: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_start_btn\"),\n        skip_btn: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_skip_btn\"),\n        ctrl_btn: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_ctrl-btn\"),\n        game: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_game\"),\n        controlsbox: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_controls\"),\n        resultscontainer: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_resultscontainer\"),\n        speakbtncontainer: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_speakbtncontainer\"),\n        mainmenu: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_mainmenu\"),\n        title: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_title\"),\n        question: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_question\"),\n        speech_container: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_speechcontainer\"),\n        landr_correctfeedback: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_correctfeedback\"),\n        landr_incorrectfeedback: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_incorrectfeedback\"),\n        landr_fbcontainer: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_fbcontainer\"),\n        landr_feedback: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_feedback\"),\n        landr_listen_btn: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_listen_btn\"),\n        progress_container: $(\"#\" + self.itemdata.uniqueid + \"_container .progress-container\"),\n        description: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_description\"),\n        image: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_image_container\"),\n        maintitle: $(\"#\" + self.itemdata.uniqueid + \"_container .landr_maintitle\"),\n      };\n    },\n\n    init_strings: function() {\n        var self = this;\n        str.get_strings([\n            { \"key\": \"nextlessonitem\", \"component\": 'mod_minilesson'},\n            { \"key\": \"confirm_desc\", \"component\": 'mod_minilesson'},\n            { \"key\": \"yes\", \"component\": 'moodle'},\n            { \"key\": \"no\", \"component\": 'moodle'},\n        ]).done(function (s) {\n            var i = 0;\n            self.strings.nextlessonitem = s[i++];\n            self.strings.confirm_desc = s[i++];\n            self.strings.yes = s[i++];\n            self.strings.no = s[i++];\n        });\n    },\n\n    next_question: function (percent) {\n      var self = this;\n      var stepdata = {};\n      stepdata.index = self.index;\n      stepdata.hasgrade = true;\n      stepdata.totalitems = self.items.length;\n      stepdata.correctitems = self.items.filter(function (e) {\n        return e.correct;\n      }).length;\n      stepdata.grade = Math.round((stepdata.correctitems / stepdata.totalitems) * 100);\n\n      //stop audio\n      self.stop_audio();\n\n      //transition\n      self.quizhelper.do_next(stepdata);\n    },\n\n    show_item_review: function () {\n      var self = this;\n\n      self.items.forEach(function(item){\n          var itemwordlist = [];\n          item.landr_targetWords.forEach(function(data) {\n              if (data !== '') {\n                  itemwordlist.push(data);\n              }\n          });\n          var wordmatch = itemwordlist.join(\"\");\n          var regex = new RegExp(wordmatch, \"gi\");\n          var answerclass = item.correct ? 'correctitem' : 'wrongitem';\n          var result = item.target.replace(regex, ` <span class=\"${answerclass}\">${wordmatch}</span>`);\n          item.target = result;\n      });\n\n      var review_data = {};\n      review_data.items = self.items;\n      review_data.totalitems = self.items.length;\n      review_data.correctitems = self.items.filter(function (e) {\n        return e.correct;\n      }).length;\n\n      //display results\n      var gamebox = self.controls.game;\n      var controlsbox = self.controls.controlsbox;\n      var recorderbox = self.controls.speakbtncontainer;\n      var resultsbox = self.controls.resultscontainer;\n      var audioplayerbtn = self.controls.landr_listen_btn;\n      templates.render('mod_minilesson/listitemresults', review_data).then(\n          function (html, js) {\n            resultsbox.html(html);\n            //show and hide\n            resultsbox.show();\n            gamebox.hide();\n            controlsbox.hide();\n            recorderbox.hide();\n            audioplayerbtn.hide();\n            self.controls.progress_container.hide();\n            self.controls.title.hide();\n            // Run js for audio player events\n            templates.runTemplateJS(js);\n          }\n      );// End of templates\n    },\n\n    register_events: function () {\n\n      var self = this;\n      //on next button click\n      self.controls.nextbutton.on('click', function (e) {\n        if (self.items.some(item => !item.answered)) {\n            notification.confirm(self.strings.nextlessonitem,\n                self.strings.confirm_desc,\n                self.strings.yes,\n                self.strings.no,\n                function() {\n                    self.next_question();\n                }\n            );\n        } else {\n            self.next_question();\n        }\n      });\n      //on start button click\n      self.controls.start_btn.on(\"click\", function () {\n        self.start();\n      });\n\n\n      //AUDIO PLAYER Button events\n      var audioplayerbtn = self.controls.landr_listen_btn;\n      // On listen button click\n      audioplayerbtn.on(\"click\", function () {\n        var theaudio = self.items[self.game.pointer].audio;\n\n        //if we are already playing stop playing\n        if(!theaudio.paused){\n          theaudio.pause();\n          theaudio.currentTime=0;\n          $(audioplayerbtn).children('.fa').removeClass('fa-stop');\n          $(audioplayerbtn).children('.fa').addClass('fa-volume-up');\n          return;\n        }\n\n        //change icon to indicate playing state\n        theaudio.addEventListener('ended', function () {\n          $(audioplayerbtn).children('.fa').removeClass('fa-stop');\n          $(audioplayerbtn).children('.fa').addClass('fa-volume-up');\n        });\n\n        theaudio.addEventListener('play', function () {\n          $(audioplayerbtn).children('.fa').removeClass('fa-volume-up');\n          $(audioplayerbtn).children('.fa').addClass('fa-stop');\n        });\n        theaudio.load();\n        theaudio.play();\n      });\n\n      //on skip button click\n      self.controls.skip_btn.on(\"click\", function () {\n        //disable the buttons\n        self.controls.ctrl_btn.prop(\"disabled\", true);\n        //reveal the prompt\n        self.controls.container.find('.landr_speech.landr_teacher_left').text(self.items[self.game.pointer].displayprompt + \"\");\n        //reveal the answer\n        self.controls.container.find('.landr_word_input').each(function () {\n          var realidx = $(this).data(\"realidx\");\n          var landr_word_input = self.items[self.game.pointer].landr_targetWords[realidx];\n          $(this).val(landr_word_input);\n        });\n\n        //mark as answered and incorrect\n        self.items[self.game.pointer].answered = true;\n        self.items[self.game.pointer].correct = false;\n\n        //Stop timer\n        self.stopTimer(self.items[self.game.pointer].timer);\n\n        //next prompt or end\n        if (self.game.pointer < self.items.length - 1) {\n          self.controls.skip_btn.prop(\"disabled\", true);\n          self.controls.skip_btn.children('.fa').removeClass('fa-arrow-right');\n          self.controls.skip_btn.children('.fa').addClass('fa-spinner fa-spin');\n          //move on after short time to next prompt\n          setTimeout(function () {\n            self.controls.skip_btn.children('.fa').removeClass('fa-spinner fa-spin');\n            self.controls.skip_btn.children('.fa').addClass('fa-arrow-right');\n            self.controls.skip_btn.prop(\"disabled\", false);\n            self.game.pointer++;\n            self.nextPrompt();\n          }, 2200);\n          //end question\n        } else {\n          self.end();\n        }\n      });\n\n    },\n\n\n    game: {\n      pointer: 0\n    },\n    usevoice: '',\n    setvoice: function () {\n      var self = this;\n      self.usevoice = self.itemdata.usevoice;\n      self.voiceoption = self.itemdata.voiceoption;\n      return;\n    },\n    getItems: function () {\n      var self = this;\n      var text_items = self.itemdata.sentences;\n\n      self.items = text_items.map(function (target) {\n        return {\n          landr_targetWords: target.sentence.trim().split(self.quizhelper.spliton_regexp).filter(function (e) {\n            return e !== \"\";\n          }),\n          target: target.sentence,\n          prompt: target.prompt,\n          displayprompt: target.displayprompt,\n          phonetic: target.phonetic,\n          typed: \"\",\n          answered: false,\n          correct: false,\n          audio: null,\n          timer: [],\n          audiourl: target.audiourl ? target.audiourl : \"\",\n          imageurl: target.imageurl,\n        };\n      }).filter(function (e) {\n        return e.target !== \"\";\n      });\n\n\n      $.each(self.items, function (index, item) {\n        item.audio = new Audio();\n        item.audio.src = item.audiourl;\n        if (self.items.filter(function (e) {\n          return e.audio === null;\n        }).length === 0) {\n          self.appReady();\n        }\n      });\n    },\n\n    appReady: function () {\n      var self = this;\n      self.controls.container.find('.landr_not_loaded').hide();\n      self.controls.container.find('.landr_loaded').show();\n      if(self.itemdata.hidestartpage){\n        self.start();\n      }else{\n        self.controls.start_btn.prop(\"disabled\", false);\n      }\n\n    },\n\n    gotComparison: function (comparison, typed) {\n      var self = this;\n\n      self.controls.container.find('.landr_word_input').removeClass(\"landr_correct landr_incorrect\");\n      self.controls.container.find('.landr_feedback_icon').removeClass(\"fa fa-check fa-times\");\n\n      var allCorrect = comparison.filter(function (e) {\n        return !e.matched;\n      }).length == 0;\n\n      if (allCorrect && comparison && comparison.length > 0) {\n\n        self.controls.container.find('.landr_word_input').addClass(\"landr_correct\");\n        self.controls.container.find('.landr_feedback_icon').addClass(\"fa fa-check\");\n        self.controls.container.find('.landr_speech.landr_teacher_left').text(self.items[self.game.pointer].displayprompt + \"\");\n\n        self.items[self.game.pointer].answered = true;\n        self.items[self.game.pointer].correct = true;\n        self.items[self.game.pointer].typed = typed;\n\n        //stop timer\n        self.stopTimer(self.items[self.game.pointer].timer);\n\n        self.controls.ctrl_btn.prop(\"disabled\", true);\n        if (self.game.pointer < self.items.length - 1) {\n          setTimeout(function () {\n            self.game.pointer++;\n            self.nextPrompt();\n          }, 2200);\n        } else {\n          self.end();\n        }\n\n      } else {\n        //mark up the words as correct or not\n        comparison.forEach(function (obj) {\n          if (!obj.matched) {\n            self.controls.container.find('.landr_word_input[data-idx=\"' + obj.wordnumber + '\"]').addClass(\"landr_incorrect\");\n            self.controls.container.find('.landr_feedback_icon[data-idx=\"' + obj.wordnumber + '\"]').addClass(\"fa fa-times\");\n          } else {\n            self.controls.container.find('.landr_word_input[data-idx=\"' + obj.wordnumber + '\"]').addClass(\"landr_correct\");\n            self.controls.container.find('.landr_feedback_icon[data-idx=\"' + obj.wordnumber + '\"]').addClass(\"fa fa-check\");\n          }\n        });\n        var thereply = self.controls.container.find('.landr_reply_' + self.game.pointer);\n        anim.do_animate(thereply, 'shakeX animate__faster').then(\n            function () {\n              self.controls.ctrl_btn.prop(\"disabled\", false);\n            }\n        );\n\n      }\n      //show all the correct words\n      self.controls.container.find('.landr_word_input.landr_correct').each(function () {\n        var realidx = $(this).data(\"realidx\");\n        var landr_word_input = self.items[self.game.pointer].landr_targetWords[realidx];\n        $(this).val(landr_word_input);\n      });\n\n    },\n\n    getWords: function (thetext) {\n      var self = this;\n      var checkcase = false;\n      if (checkcase == 'false') {\n        thetext = thetext.toLowerCase();\n      }\n      var chunks = thetext.split(self.quizhelper.spliton_regexp).filter(function (e) {\n        return e !== \"\";\n      });\n      var words = [];\n      for (var i = 0; i < chunks.length; i++) {\n        if (!chunks[i].match(self.quizhelper.spliton_regexp)) {\n          words.push(chunks[i]);\n        }\n      }\n      return words;\n    },\n    getComparison: function (passage, transcript, phonetic, callback) {\n      var self = this;\n\n      self.controls.ctrl_btn.prop(\"disabled\", true);\n      self.quizhelper.comparePassageToTranscript(passage, transcript, phonetic, self.itemdata.language, self.itemdata.alternates).then(function (ajaxresult) {\n        var payloadobject = JSON.parse(ajaxresult);\n        if (payloadobject) {\n          callback(payloadobject);\n        } else {\n          callback(false);\n        }\n      });\n\n    },\n    end: function () {\n      var self = this;\n      self.controls.nextbutton.prop(\"disabled\", true);\n\n      //progress dots are updated on next_item. The last item has no next item, so we update from here\n      self.updateProgressDots();\n\n      //disable the buttons and go to next question or review\n      setTimeout(function () {\n        self.controls.nextbutton.prop(\"disabled\", false);\n        if (self.quizhelper.showitemreview) {\n          self.show_item_review();\n        } else {\n          self.next_question();\n        }\n      }, 2200);\n\n    },\n    start: function () {\n      var self = this;\n\n      self.controls.ctrl_btn.prop(\"disabled\", true);\n      self.controls.speakbtncontainer.show();\n      self.controls.title.show();\n\n      self.items.forEach(function (item) {\n        item.spoken = \"\";\n        item.answered = false;\n        item.correct = false;\n      });\n\n      self.game.pointer = 0;\n\n      self.controls.game.show();\n      self.controls.start_btn.hide();\n      self.controls.description.hide();\n      self.controls.image.hide();\n      self.controls.maintitle.show();\n      self.controls.container.find('.landr_listen_cont').show();\n      self.controls.mainmenu.hide();\n      self.controls.controlsbox.show();\n\n      self.nextPrompt();\n\n    },\n\n    nextPrompt: function () {\n      var showText = parseInt(this.itemdata.show_text);\n      var self = this;\n\n      //target is the speech we expect\n      var target = self.items[self.game.pointer].target;\n      //in some cases ttrecorder wants to know the target\n      if (self.quizhelper.use_ttrecorder()) {\n        self.ttrec.currentPrompt = target;\n      }\n      var displayprompt = self.items[self.game.pointer].displayprompt;\n      if (!showText) {\n        var nopunc = displayprompt.replace(self.quizhelper.nopunc_regexp, \"\");\n        var dots = nopunc.replace(self.quizhelper.nonspaces_regexp, 'â€¢');\n        var showprompt = dots;\n      } else {\n        var showprompt = displayprompt;\n      }\n\n      templates.render('mod_minilesson/listenrepeat_prompt',\n          {showprompt: showprompt, pointer: self.game.pointer})\n          .then(function (html, js) {\n                self.controls.game.html(html);\n                self.controls.ctrl_btn.prop(\"disabled\", false);\n                self.updateProgressDots();\n                var newprompt = self.controls.container.find(\".landr_prompt_\" + self.game.pointer);\n                anim.do_animate(newprompt, 'zoomIn animate__faster', 'in').then(\n                    function () {\n                    }\n                );\n                self.nextReply();\n              }\n          );// End of templates\n    },\n\n    updateProgressDots: function () {\n      var self = this;\n      var color,icon;\n      var progress = self.items.map(function (item, idx) {\n        color = \"#E6E9FD\";\n        icon = \"fa fa-square\";\n        if (self.items[idx].answered && self.items[idx].correct) {\n          color = \"#74DC72\";\n          icon = 'fa fa-check-square';\n        } else if (self.items[idx].answered && !self.items[idx].correct) {\n          color = \"#FB6363\";\n          icon = \"fa fa-window-close\";\n        }\n        return \"<i style='color:\" + color + \"' class='\"+ icon +\" pl-1'></i>\";\n      }).join(\" \");\n      self.controls.title.html(progress);\n    },\n\n    nextReply: function () {\n      var self = this;\n      var idx = 0;\n      var words = self.items[self.game.pointer].landr_targetWords.map(function (word, realidx) {\n        var theword = {};\n        if (!word.match(self.quizhelper.spliton_regexp)) {\n          idx++;\n          theword.isword = true;\n          theword.idx = idx;\n          theword.length = word.length;\n          theword.lengthplusone = word.length + 1;\n          theword.realidx = realidx;\n        } else {\n          theword.isword = false;\n          theword.text = word;\n        }\n        return theword;\n      });\n      var displaytimer = self.itemdata.timelimit > 0;\n\n      templates.render('mod_minilesson/listenrepeat_reply',\n          {words: words, pointer: self.game.pointer, imageurl: self.items[self.game.pointer].imageurl, displaytimer})\n          .then(function (html, js) {\n            //update html reply area\n            self.controls.game.append(html);\n            // set handle to the reply and animate it in\n            var newreply = self.controls.container.find(\".landr_reply_\" + self.game.pointer);\n            anim.do_animate(newreply, 'zoomIn animate__faster', 'in').then(\n                function () {\n                }\n            );\n\n            // Enable the skip button\n            self.controls.ctrl_btn.prop(\"disabled\", false);\n\n            //we autoplay the audio on item entry, if its not a mobile user\n            //and we have a startpage (or we have a startpage but its not the first item)\n            if (!self.quizhelper.mobile_user()){\n              if(self.itemdata.hidestartpage && self.game.pointer === 0){\n                  self.controls.container.on(\"showElement\", () => {\n                      setTimeout(function() {\n                          self.controls.landr_listen_btn.trigger('click');\n                      }, 1000);\n                  });\n              }else{\n                  setTimeout(function() {\n                      self.controls.landr_listen_btn.trigger('click');\n                  }, 1000);\n              }\n            }\n\n            //do the timer\n            if (displaytimer) {\n              self.startTimer();\n            }\n\n          });//end of templates.render\n    },//end of next reply\n\n    // Stop audio .. usually when leaving the item or sentence\n    stop_audio: function(){\n      var self =this;\n      //pause audio if its playing\n      var theaudio = self.items[self.game.pointer].audio;\n      if(theaudio && !theaudio.paused) {\n        theaudio.pause();\n      }\n    },\n\n    startTimer: function(){\n        var self = this;\n        var progress_container = self.controls.progress_container;\n        // If we have a time limit, set up the timer, otherwise return\n        if (self.itemdata.timelimit > 0) {\n            // This is a function to start the timer (we call it conditionally below)\n            var doStartTimer = function() {\n                  // This shows progress bar\n                progress_container.show();\n                progress_container.find('i').show();\n                var progresbar = progress_container.find('#progresstimer').progressTimer({\n                    height: '5px',\n                    timeLimit: self.itemdata.timelimit,\n                    onFinish: function() {\n                        self.controls.skip_btn.trigger('click');\n                    }\n                });\n                progresbar.each(function() {\n                    self.items[self.game.pointer].timer.push($(this).attr('timer'));\n                });\n            }\n\n            // This adds the timer and starts it. But if we dont have a start page and its the first item\n            // we need to defer the timer start until the item is shown\n            if(self.itemdata.hidestartpage && self.game.pointer === 0){\n                self.controls.container.on(\"showElement\", () => {\n                    doStartTimer();\n                });\n            }else{\n                doStartTimer();\n            }\n        }\n    }, //end of start timer\n\n    stopTimer: function(timers) {\n        if (timers.length) {\n            timers.forEach(function(timer) {\n                clearInterval(timer);\n            });\n        }\n    },// end of stop timer\n\n  } // end of return\n});//end of define"],"file":"listenrepeat.min.js"}