{"version":3,"file":"buttonquiz.min.js","sources":["../src/buttonquiz.js"],"sourcesContent":["define(['jquery', 'core/log', 'mod_minilesson/definitions', 'mod_minilesson/animatecss'],\n    function($, log, def, anim) {\n  \"use strict\"; // jshint ;_;\n\n  /*\n  This file is to manage the Button Quiz item type\n   */\n\n  log.debug('MiniLesson Button Quiz: initialising');\n\n  return {\n\n    //for making multiple instances\n      clone: function () {\n          return $.extend(true, {}, this);\n     },\n\n    init: function(index, itemdata, quizhelper) {\n      this.itemdata = itemdata;\n      this.register_events(index, itemdata, quizhelper);\n      //anim\n      var animopts = {};\n      animopts.useanimatecss=quizhelper.useanimatecss;\n      anim.init(animopts);\n\n    },\n    next_question: function(percent) {\n      var self = this;\n      var stepdata = {};\n      stepdata.index = self.index;\n      stepdata.hasgrade = true;\n      stepdata.totalitems = 1;\n      stepdata.correctitems = percent>0?1:0;\n      stepdata.grade = percent;\n      self.quizhelper.do_next(stepdata);\n    },\n\n    register_events: function(index, itemdata, quizhelper) {\n      \n      var self = this;\n      self.index = index;\n      self.quizhelper = quizhelper;\n      var chosenelement=null;\n      var theplayer = $(\"#\" + itemdata.uniqueid + \"_player\");\n      var nextbutton = $(\"#\" + itemdata.uniqueid + \"_container .minilesson_nextbutton\");\n      \n      nextbutton.on('click', function(e) {\n        self.next_question(0);\n      });\n\n      // if we need to submit this question we dont allow skip\n      if(itemdata.confirmchoice===1 || itemdata.confirmchoice==='1') {\n        nextbutton.hide();\n      }\n\n\n      var finalChoice = function() {\n        //if disabled =>just return (already answered)\n        if($(\"#\" + itemdata.uniqueid + \"_container .minilesson_mc_response\").hasClass('minilesson_mc_disabled')){\n          return;\n        }\n\n        //get selected item index\n        var checked = $(chosenelement).data('index');\n\n        //disable the answers, cos its answered\n        $(\"#\" + itemdata.uniqueid + \"_container .minilesson_mc_response\").addClass('minilesson_mc_disabled');\n\n        //reveal answers\n        $(\"#\" + itemdata.uniqueid + \"_container .minilesson_mc_unanswered\").hide();\n        $(\"#\" + itemdata.uniqueid + \"_container .minilesson_mc_wrong\").show();\n\n        $(\"#\" + itemdata.uniqueid + \"_option\" + itemdata.correctanswer + \" .minilesson_mc_wrong\").hide();\n        $(\"#\" + itemdata.uniqueid + \"_option\" + itemdata.correctanswer + \" .minilesson_mc_right\").show();\n\n\n        //if answers were dots for audio content, show them\n        if(itemdata.hasOwnProperty('audiocontent')) {\n          for (var i = 0; i < itemdata.sentences.length; i++) {\n            var theline = $(\"#\" + itemdata.uniqueid + \"_option\" + (i + 1));\n            $(\"#\" + itemdata.uniqueid + \"_option\" + (i + 1) + ' .minilesson_sentence').text(itemdata.sentences[i].sentence);\n          }\n        }\n\n\n        //highlight selected answers\n        $(\"#\" + itemdata.uniqueid + \"_option\" + checked).addClass('minilesson_mc_selected');\n        var percent = checked == itemdata.correctanswer ? 100 : 0;\n\n        $(\".minilesson_nextbutton\").prop(\"disabled\", true);\n        setTimeout(function() {\n          $(\".minilesson_nextbutton\").prop(\"disabled\", false);\n          self.next_question(percent);\n        }, 2000);\n\n      };//end of final choice\n\n      //on tapping of a response, we either action the choice or show a confirmation button\n      $(\"#\" + itemdata.uniqueid + \"_container .minilesson_mc_response\").on('click', function(e){\n        chosenelement = this;\n        if(itemdata.confirmchoice===0 || itemdata.confirmchoice==='0'){\n          finalChoice();\n        }else{\n\n          //highlight selected answer\n          //get selected item index\n          var checked = $(this).data('index');\n          $(\"#\" + itemdata.uniqueid + \"_container .minilesson_mc_response\").removeClass('minilesson_mc_selected');\n          $(\"#\" + itemdata.uniqueid + \"_option\" + checked).addClass('minilesson_mc_selected');\n\n          self.showConfirmButton(itemdata);\n        }\n      });\n\n      //on tapping of confirmation button, execute final choice\n      $(\"#\" + itemdata.uniqueid + \"_container .minilesson_mc_confirmchoice\").on('click', function(e){\n        finalChoice();\n      });\n    },\n\n    showConfirmButton: function(itemdata) {\n      var confirmbutton =$(\"#\" + itemdata.uniqueid + \"_container .minilesson_mc_confirmchoice\");\n      anim.do_animate(confirmbutton,'zoomIn animate__faster','in');\n    },\n\n\n  };\n});"],"names":["define","$","log","def","anim","debug","clone","extend","this","init","index","itemdata","quizhelper","register_events","animopts","useanimatecss","next_question","percent","stepdata","hasgrade","totalitems","correctitems","grade","do_next","self","chosenelement","nextbutton","uniqueid","on","e","confirmchoice","hide","finalChoice","hasClass","checked","data","addClass","show","correctanswer","hasOwnProperty","i","sentences","length","text","sentence","prop","setTimeout","removeClass","showConfirmButton","confirmbutton","do_animate"],"mappings":"AAAAA,mCAAO,CAAC,SAAU,WAAY,6BAA8B,8BACxD,SAASC,EAAGC,IAAKC,IAAKC,aAOxBF,IAAIG,MAAM,wCAEH,CAGHC,MAAO,kBACIL,EAAEM,QAAO,EAAM,GAAIC,OAGhCC,KAAM,SAASC,MAAOC,SAAUC,iBACzBD,SAAWA,cACXE,gBAAgBH,MAAOC,SAAUC,gBAElCE,SAAW,GACfA,SAASC,cAAcH,WAAWG,cAClCX,KAAKK,KAAKK,WAGZE,cAAe,SAASC,aAElBC,SAAW,GACfA,SAASR,MAFEF,KAEWE,MACtBQ,SAASC,UAAW,EACpBD,SAASE,WAAa,EACtBF,SAASG,aAAeJ,QAAQ,EAAE,EAAE,EACpCC,SAASI,MAAQL,QANNT,KAONI,WAAWW,QAAQL,WAG1BL,gBAAiB,SAASH,MAAOC,SAAUC,gBAErCY,KAAOhB,KACXgB,KAAKd,MAAQA,MACbc,KAAKZ,WAAaA,eACda,cAAc,KAEdC,YADYzB,EAAE,IAAMU,SAASgB,SAAW,WAC3B1B,EAAE,IAAMU,SAASgB,SAAW,sCAE7CD,WAAWE,GAAG,SAAS,SAASC,GAC9BL,KAAKR,cAAc,MAIO,IAAzBL,SAASmB,eAA8C,MAAzBnB,SAASmB,eACxCJ,WAAWK,WAITC,YAAc,eAEb/B,EAAE,IAAMU,SAASgB,SAAW,sCAAsCM,SAAS,+BAK1EC,QAAUjC,EAAEwB,eAAeU,KAAK,YAGpClC,EAAE,IAAMU,SAASgB,SAAW,sCAAsCS,SAAS,0BAG3EnC,EAAE,IAAMU,SAASgB,SAAW,wCAAwCI,OACpE9B,EAAE,IAAMU,SAASgB,SAAW,mCAAmCU,OAE/DpC,EAAE,IAAMU,SAASgB,SAAW,UAAYhB,SAAS2B,cAAgB,yBAAyBP,OAC1F9B,EAAE,IAAMU,SAASgB,SAAW,UAAYhB,SAAS2B,cAAgB,yBAAyBD,OAIvF1B,SAAS4B,eAAe,oBACpB,IAAIC,EAAI,EAAGA,EAAI7B,SAAS8B,UAAUC,OAAQF,IAAK,CACpCvC,EAAE,IAAMU,SAASgB,SAAW,WAAaa,EAAI,IAC3DvC,EAAE,IAAMU,SAASgB,SAAW,WAAaa,EAAI,GAAK,yBAAyBG,KAAKhC,SAAS8B,UAAUD,GAAGI,UAM1G3C,EAAE,IAAMU,SAASgB,SAAW,UAAYO,SAASE,SAAS,8BACtDnB,QAAUiB,SAAWvB,SAAS2B,cAAgB,IAAM,EAExDrC,EAAE,0BAA0B4C,KAAK,YAAY,GAC7CC,YAAW,WACT7C,EAAE,0BAA0B4C,KAAK,YAAY,GAC7CrB,KAAKR,cAAcC,WAClB,OAKLhB,EAAE,IAAMU,SAASgB,SAAW,sCAAsCC,GAAG,SAAS,SAASC,MACrFJ,cAAgBjB,KACY,IAAzBG,SAASmB,eAA8C,MAAzBnB,SAASmB,cACxCE,kBACG,KAICE,QAAUjC,EAAEO,MAAM2B,KAAK,SAC3BlC,EAAE,IAAMU,SAASgB,SAAW,sCAAsCoB,YAAY,0BAC9E9C,EAAE,IAAMU,SAASgB,SAAW,UAAYO,SAASE,SAAS,0BAE1DZ,KAAKwB,kBAAkBrC,cAK3BV,EAAE,IAAMU,SAASgB,SAAW,2CAA2CC,GAAG,SAAS,SAASC,GAC1FG,kBAIJgB,kBAAmB,SAASrC,cACtBsC,cAAehD,EAAE,IAAMU,SAASgB,SAAW,2CAC/CvB,KAAK8C,WAAWD,cAAc,yBAAyB"}