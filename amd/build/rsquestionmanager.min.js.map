{"version":3,"file":"rsquestionmanager.min.js","sources":["../src/rsquestionmanager.js"],"sourcesContent":["/* jshint ignore:start */\ndefine(\n    ['jquery', 'core/log','core/templates','mod_minilesson/definitions','mod_minilesson/modalformhelper',\n        'mod_minilesson/modaldeletehelper','mod_minilesson/moveitemhelper','mod_minilesson/modalpreviewhelper',\n        'mod_minilesson/duplicateitemhelper','mod_minilesson/datatables', 'core/modal_factory', 'core/modal_events'],\n    function ($,  log, templates, def, mfh, mdh, mih, mph,dplh, datatables, ModalFactory, ModalEvents) {\n\n        \"use strict\"; // jshint ;_;\n\n        log.debug('RSQuestion manager: initialising');\n\n        return {\n\n            cmid: null,\n            controls: null,\n            rowIds: [],\n\n\n            //pass in config\n            init: function (props) {\n                var dd = this;\n                dd.contextid = props.contextid;\n                dd.tableid = props.tableid;\n                dd.modaleditform = props.modaleditform;\n                dd.cmid = props.cmid;\n                dd.wwwroot = props.wwwroot;\n\n                //fetch lesson items from hidden input\n                var datatag = $('#' + props.lessonitems);\n                dd.lessonitems = JSON.parse(datatag.val());\n                datatag.remove(); //we dont need it any more\n\n                dd.modalshow();\n                dd.register_events();\n                dd.process_html();\n                dd.collate_rowids();\n                dd.hide_useless_arrows();\n            },\n\n            process_html: function () {\n                this.controls = [];\n                this.controls.questionstable = datatables.getDataTable(this.tableid);\n                this.controls.questionscontainer = $('#' + def.itemscontainer);\n                this.controls.noquestionscontainer = $('#' + def.noitemscontainer);\n                this.controls.movearrows = $('#' + def.movearrow);\n            },\n\n        //we maintain an array of datatable rowids, indexed by itemorder\n        //we need this because moving, adding, deleting requires access to datatable rowid\n            collate_rowids: function () {\n                var dd = this;\n                dd.rowIds = [];\n\n                dd.controls.questionstable.rows().every(function ( rowindex, tableLoop, rowLoop ) {\n                    var itemorder = dd.controls.questionstable.cell({row:rowindex, column:1}).data();\n                    dd.rowIds[itemorder] = rowindex;\n                });\n            },\n\n        //we wont to show move arrows, but hide arrows the final down and first up\n            hide_useless_arrows: function () {\n              //first lets show all the arrows\n                $('.mod_minilesson_item_move').attr('style','');\n\n              //if no rows just get out of here.\n                var rowcount = this.controls.questionstable.data().length;\n                if (!rowcount || rowcount < 1) {\n                    return;}\n\n              //hide bottom down arrow\n                var bottomrowindex = this.rowIds[rowcount];\n                var bottomtr = this.controls.questionstable.row(bottomrowindex).node();\n                $(bottomtr).find('.mod_minilesson_item_move[data-direction=\"down\"]').attr('style','visibility: hidden;');\n\n              //hide top up arrow\n                var toprowindex = this.rowIds[1];\n                var toptr = this.controls.questionstable.row(toprowindex).node();\n                $(toptr).find('.mod_minilesson_item_move[data-direction=\"up\"]').attr('style','visibility: hidden;');\n            },\n\n        // we need to renumber rows when we remove one, so we start from there and renumber the next ones\n            renumber_rows:function (fromorder) {\n\n                var thetable = this.controls.questionstable;\n                var rowcount = thetable.data().length;\n                for (var itemorder = fromorder; itemorder < rowcount; itemorder++) {\n                    var rowindex = this.rowIds[itemorder + 1];\n                    thetable.cell({row:rowindex, column:1}).data(itemorder);\n                }\n            },\n\n            move_row:function (itemid, direction) {\n                var thetable = this.controls.questionstable;\n                var therow = '#' + def.itemrow + '_' + itemid;\n                var currentrow = thetable.row(therow);\n                var currentindex = currentrow.index();\n                var currentorder = parseInt(thetable.cell({row:currentindex, column:1}).data());\n\n\n                var targetorder;\n                if (direction == \"up\") {\n                    targetorder = currentorder - 1;\n                } else if (direction == \"down\") {\n                    targetorder = currentorder + 1;\n                }\n\n                //should never arrive here pitching for out of range. But just in case\n                if (targetorder < 1) {\n                    return;}\n                var rowcount = thetable.data().length;\n                if (targetorder > rowcount) {\n                    return;}\n\n                var targetindex = this.rowIds[targetorder];\n                var from = thetable.cell({row:currentindex, column:1}).data();\n                var to = thetable.cell({row:targetindex, column:1}).data();\n                thetable.cell({row:currentindex, column:1}).data(to);\n                thetable.cell({row:targetindex, column:1}).data(from);\n                thetable.draw(false);\n                this.collate_rowids();\n\n            },\n            register_events: function () {\n\n                var dd = this;\n\n\n                var after_questionmove = function (itemid, direction) {\n                    dd.move_row(itemid,direction);\n                    dd.hide_useless_arrows();\n                };\n\n                var after_questionedit = function (item, itemid) {\n                    var therow = '#' + def.itemrow + '_' + itemid;\n                    dd.controls.questionstable.cell($(therow + ' .c1')).data(decodeURIComponent(item.name));\n                };\n                var after_questionadd = function (item, itemid) {\n                    item.id = itemid;\n                    item.name = decodeURIComponent(item.name);\n                    item.index = dd.controls.questionstable.data().length + 1;\n                    item.up = {'key': 't/up','component': 'moodle','title': 'up'};\n                    item.down = {'key': 't/down','component': 'moodle','title': 'down'};\n                    templates.render('mod_minilesson/itemlistitem',item).then(\n                        function (html,js) {\n                            //add row move to the last page so we can see the new row if its off page\n                            dd.controls.questionstable.row.add($(html)[0]).page('last').draw(false);\n                            dd.collate_rowids();\n                            dd.hide_useless_arrows();\n                        }\n                    );\n                    dd.controls.noquestionscontainer.hide();\n                    dd.controls.questionscontainer.show();\n                };\n                var after_questionduplicate = function ($resp) {\n\n                    var ret = JSON.parse($resp);\n                    var item = {};\n                    item.id = ret.newitemid;\n                    item.name = decodeURIComponent(ret.newitemname);\n                    item.type = ret.type;\n                    item.icon = ret.icon;\n                    item.typelabel = decodeURIComponent(ret.typelabel);\n                    item.index = dd.controls.questionstable.data().length + 1;\n                    item.up = {'key': 't/up','component': 'moodle','title': 'up'};\n                    item.down = {'key': 't/down','component': 'moodle','title': 'down'};\n                    templates.render('mod_minilesson/itemlistitem',item).then(\n                        function (html,js) {\n                            //add row move to the last page so we can see the new row if its off page\n                            dd.controls.questionstable.row.add($(html)[0]).page('last').draw(false);\n                            dd.collate_rowids();\n                            dd.hide_useless_arrows();\n                        }\n                    );\n                    dd.controls.noquestionscontainer.hide();\n                    dd.controls.questionscontainer.show();\n                };\n                var after_questiondelete = function (itemid) {\n                    log.debug('after question delete');\n                    var therow = dd.controls.questionstable.row('#' + def.itemrow + '_' + itemid);\n                    var itemorder = parseInt(therow.data()[0]);\n                    dd.renumber_rows(itemorder);\n                    therow.remove().draw(false);\n                    dd.collate_rowids();\n                    dd.hide_useless_arrows();\n                    var itemcount = dd.controls.questionstable.rows().count();\n                    if (!itemcount) {\n                        dd.controls.noquestionscontainer.show();\n                        dd.controls.questionscontainer.hide();\n                    }\n                };\n                var after_questionpreview = function (itemid) {\n                    log.debug('after preview');\n                    //we want to remove the question from DOM ... its still there and on subsequent shows, id will match on 2 elements and question will fail to unhide\n                    $('#mod_minilesson_quiz_cont').remove();\n                };\n\n            //register ajax modal handler\n                var editcallback = function (item, itemid) {\n                    console.log(item);};\n                var deletecallback = function (itemid) {\n                    console.log(itemid);};\n                var addcallback = function (itemid) {\n                    console.log(itemid);};\n                if (dd.modaleditform) {\n                    mfh.init('.' + def.component + '_addlink', dd.contextid, after_questionadd);\n                    //edit form helper\n                    mfh.init('.' + def.itemrow + '_editlink', dd.contextid, after_questionedit);\n                } else {\n                    $('.mod_minilesson_qpanel').on('click','.' + def.itemrow + '_editlink',function () {\n                        var editurl = dd.wwwroot + '/mod/minilesson/rsquestion/managersquestions.php?id=' + dd.cmid + '&itemid=' + $(this).data('id');\n                        log.debug('editurl ' + editurl);\n                        window.location.href = editurl;\n                        return false;\n                    });\n                }\n            //delete helpser\n                mdh.init('.' + def.itemrow + '_deletelink', dd.contextid, 'deleteitem',after_questiondelete);\n            //move helper\n                mih.init('.' + def.movearrow , dd.contextid, after_questionmove);\n            //preview helper\n                mph.init('.' + def.itemrow + '_previewlink', dd.contextid, after_questionpreview);\n            //duplicate item helper\n                dplh.init('.' + def.itemrow + '_duplicatelink', dd.contextid, after_questionduplicate);\n            },\n\n            modalshow: function () {\n                var dd = this;\n                var context = {\n                    lessonitems: dd.lessonitems,\n                };\n                $('#additembtn').on('click', function () {\n                    ModalFactory.create({\n                        type: ModalFactory.types.CANCEL,\n                        body: templates.render('mod_minilesson/lessonitem', context),\n                        }).then(function (modal) {\n                            dd.modal = modal;\n                            dd.modal.setLarge();\n                            dd.modal.show();\n                            dd.modal.getRoot().find('.modal-header, .modal-footer').hide();\n                            dd.modal.getRoot().addClass('lessonitem-modal');\n\n                            dd.modal.getRoot().on(ModalEvents.shown, function () {\n                                modal.getRoot().find('.modal-dialog').addClass('modal-dialog-centered');\n                            });\n\n                            // on click of a lesson item link, show the relevant description panel, hide the others\n                            var modalRoot = dd.modal.getRoot();\n                            modalRoot.on('click', 'a.lessonitem-link', function (e) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                if (e.stopImmediatePropagation) {\n                                    e.stopImmediatePropagation(); }\n\n                                const selector = this.getAttribute('data-toggletarget');\n                                const allpanels = modalRoot.find('.lessonitem-description');\n                                const alllinks = modalRoot.find('.lessonitem-link');\n                                if (!selector) {\n                                    log.debug('No toggle target specified');\n                                    return;\n                                }\n                                const target = modalRoot.find(selector);\n                                if (!target) {\n                                    log.debug('No target found for selector ' + selector);\n                                    return;\n                                }\n\n                                // Show the correct panel and hide the others.\n                                if (target.hasClass('show')) {\n                                    log.debug('already visible do nothing ');\n                                    // Already shown, do nothing.\n                                    return;\n                                } else {\n                                    log.debug('not visible, showing now');\n                                    // Hide all others.\n                                    allpanels.removeClass('show').trigger('lessonitem:hidden');\n                                    // Not shown, show it.\n                                    target.addClass('show').trigger('lessonitem:shown');\n\n                                    // Set all other links to aria-expanded false\n                                    alllinks.attr('aria-expanded', 'false');\n                                    // Show this one.\n                                    this.setAttribute('aria-expanded', 'true');\n                                }\n                            });\n\n                            // If they click the add button , lets turn it into a spinner\n                            modalRoot.on('click', 'a.addbtn', function (e) {\n\n                                const addbtn = $(this);\n                                if (addbtn.hasClass('ml_loading')) {\n                                    // Already loading, do nothing.\n                                    return;\n                                }\n                                addbtn.addClass('ml_loading');\n                                addbtn.html(\"<i class='icon fa fa-spinner fa-pulse fa-fw ' aria-hidden='true'></i> \");\n                            });\n\n                            dd.videocontroller(dd.modal.getRoot());\n\n                            dd.modal.getRoot().on(ModalEvents.hidden, function () {\n                                $(this).find('video').each(function () {\n                                    this.pause();\n                                    this.currentTime = 0;\n                                    dd.modal.destroy();\n                                });\n                            });\n\n\n                            return dd.modal;\n                        });\n                });\n            },\n\n\n            videocontroller: function (rootel) {\n                $(rootel).on('shown.bs.collapse lessonitem:shown', '.lessonitem-description', function () {\n                    var video = $(this).find('video').get(0);\n                    if (video) {\n                        var source = $(video).find('source');\n                        if (source.length && source.attr('data-src') && !source.attr('src')) {\n                            source.attr('src', source.attr('data-src'));\n                            video.load();\n                        }\n                        video.play();\n                    }\n                });\n\n\n                $(rootel).on('hide.bs.collapse lessonitem:hidden', '.lessonitem-description', function () {\n                    var video = $(this).find('video').get(0);\n                    if (video) {\n                        video.pause();\n                        video.currentTime = 0;\n                    }\n                });\n            }\n\n        };//end of returned object\n    }\n);//total end\n"],"names":["define","$","log","templates","def","mfh","mdh","mih","mph","dplh","datatables","ModalFactory","ModalEvents","debug","cmid","controls","rowIds","init","props","dd","this","contextid","tableid","modaleditform","wwwroot","datatag","lessonitems","JSON","parse","val","remove","modalshow","register_events","process_html","collate_rowids","hide_useless_arrows","questionstable","getDataTable","questionscontainer","itemscontainer","noquestionscontainer","noitemscontainer","movearrows","movearrow","rows","every","rowindex","tableLoop","rowLoop","itemorder","cell","row","column","data","attr","rowcount","length","bottomrowindex","bottomtr","node","find","toprowindex","toptr","renumber_rows","fromorder","thetable","move_row","itemid","direction","targetorder","therow","itemrow","currentindex","index","currentorder","parseInt","targetindex","from","to","draw","component","item","id","name","decodeURIComponent","up","down","render","then","html","js","add","page","hide","show","on","editurl","window","location","href","count","$resp","ret","newitemid","newitemname","type","icon","typelabel","context","create","types","CANCEL","body","modal","setLarge","getRoot","addClass","shown","modalRoot","e","preventDefault","stopPropagation","stopImmediatePropagation","selector","getAttribute","allpanels","alllinks","target","hasClass","removeClass","trigger","setAttribute","addbtn","videocontroller","hidden","each","pause","currentTime","destroy","rootel","video","get","source","load","play"],"mappings":"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"}