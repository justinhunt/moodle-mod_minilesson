{"version":3,"file":"audiochat.min.js","sources":["../src/audiochat.js"],"sourcesContent":["define(['jquery', 'core/log', 'mod_minilesson/definitions',\n    'mod_minilesson/ttrecorder',  'core/templates'],\n    function($, log, def, ttrecorder, templates) {\n  \"use strict\"; // jshint ;_;\n\n  /*\n  This file is to manage the free speaking item type\n   */\n\n  log.debug('MiniLesson AudioChat: initialising');\n\n  return {\n\n\n    //for making multiple instances\n      clone: function () {\n          return $.extend(true, {}, this);\n     },\n\n    init: function(index, itemdata, quizhelper) {\n      this.itemdata = itemdata;\n      log.debug('itemdata',itemdata);\n      this.quizhelper = quizhelper;\n      this.init_components(quizhelper,itemdata);\n      this.register_events(index, itemdata, quizhelper);\n\n    },\n\n    next_question: function() {\n      var self = this;\n      var stepdata = {};\n      stepdata.index = self.index;\n      stepdata.hasgrade = true;\n      stepdata.totalitems = self.itemdata.totalmarks;\n      stepdata.correctitems = self.itemdata.totalmarks;\n      stepdata.grade = 1;\n      stepdata.resultsdata = {};\n      self.quizhelper.do_next(stepdata);\n    },\n\n    register_events: function(index, itemdata, quizhelper) {\n      \n      var self = this;\n      self.index = index;\n      self.quizhelper = quizhelper;\n      var nextbutton = $(\"#\" + itemdata.uniqueid + \"_container .minilesson_nextbutton\");\n      \n      nextbutton.on('click', function(e) {\n        self.next_question();\n      });\n\n      $(\"#\" + itemdata.uniqueid + \"_container\").on('showElement', () => {\n        if (itemdata.timelimit > 0) {\n            $(\"#\" + itemdata.uniqueid + \"_container .progress-container\").show();\n            $(\"#\" + itemdata.uniqueid + \"_container .progress-container i\").show();\n            $(\"#\" + itemdata.uniqueid + \"_container .progress-container #progresstimer\").progressTimer({\n                height: '5px',\n                timeLimit: itemdata.timelimit,\n                onFinish: function() {\n                    nextbutton.trigger('click');\n                }\n            });\n        }\n      });\n\n    },\n\n    init_components: function(quizhelper,itemdata) {\n        var self = this;\n    },\n\n  };\n});"],"names":["define","$","log","def","ttrecorder","templates","debug","clone","extend","this","init","index","itemdata","quizhelper","init_components","register_events","next_question","stepdata","hasgrade","totalitems","totalmarks","correctitems","grade","resultsdata","do_next","self","nextbutton","uniqueid","on","e","timelimit","show","progressTimer","height","timeLimit","onFinish","trigger"],"mappings":"AAAAA,kCAAO,CAAC,SAAU,WAAY,6BAC1B,4BAA8B,mBAC9B,SAASC,EAAGC,IAAKC,IAAKC,WAAYC,kBAOpCH,IAAII,MAAM,sCAEH,CAIHC,MAAO,kBACIN,EAAEO,QAAO,EAAM,GAAIC,OAGhCC,KAAM,SAASC,MAAOC,SAAUC,iBACzBD,SAAWA,SAChBV,IAAII,MAAM,WAAWM,eAChBC,WAAaA,gBACbC,gBAAgBD,WAAWD,eAC3BG,gBAAgBJ,MAAOC,SAAUC,aAIxCG,cAAe,eAETC,SAAW,GACfA,SAASN,MAFEF,KAEWE,MACtBM,SAASC,UAAW,EACpBD,SAASE,WAJEV,KAIgBG,SAASQ,WACpCH,SAASI,aALEZ,KAKkBG,SAASQ,WACtCH,SAASK,MAAQ,EACjBL,SAASM,YAAc,GAPZd,KAQNI,WAAWW,QAAQP,WAG1BF,gBAAiB,SAASJ,MAAOC,SAAUC,gBAErCY,KAAOhB,KACXgB,KAAKd,MAAQA,MACbc,KAAKZ,WAAaA,eACda,WAAazB,EAAE,IAAMW,SAASe,SAAW,qCAE7CD,WAAWE,GAAG,SAAS,SAASC,GAC9BJ,KAAKT,mBAGPf,EAAE,IAAMW,SAASe,SAAW,cAAcC,GAAG,eAAe,KACtDhB,SAASkB,UAAY,IACrB7B,EAAE,IAAMW,SAASe,SAAW,kCAAkCI,OAC9D9B,EAAE,IAAMW,SAASe,SAAW,oCAAoCI,OAChE9B,EAAE,IAAMW,SAASe,SAAW,iDAAiDK,cAAc,CACvFC,OAAQ,MACRC,UAAWtB,SAASkB,UACpBK,SAAU,WACNT,WAAWU,QAAQ,iBAQnCtB,gBAAiB,SAASD,WAAWD"}