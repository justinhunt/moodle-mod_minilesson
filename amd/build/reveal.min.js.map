{"version":3,"file":"reveal.min.js","sources":["../src/reveal.js"],"sourcesContent":["import log from 'core/log';\n\nconst globalRemoteHost = 'https://cdn.jsdelivr.net/npm/reveal.js@5.2.1';\nconst globalJSURL = `${globalRemoteHost}/dist/reveal.js`;\nconst globalThemeURL = `${globalRemoteHost}/dist/theme/{theme}.css`;\nconst globalCssURL = `${globalRemoteHost}/dist/reveal.min.css`;\nconst globalMarkdownURL = `${globalRemoteHost}/plugin/markdown/markdown.js`;\nconst chinaRemoteHost = 'https://cdn.bootcdn.net/ajax/libs/reveal.js/5.2.1';\nconst chinaJSURL = `${chinaRemoteHost}/reveal.min.js`;\nconst chinaThemeURL = `${chinaRemoteHost}/theme/{theme}.min.css`;\nconst chinaCssURL = `${chinaRemoteHost}/reveal.min.css`;\nconst chinaMarkdownURL = `${chinaRemoteHost}/plugin/markdown/markdown.min.js`;\nconst defaultTheme = 'black';\n\nlet theregion = null;\nlet themeLinkElement = null;\nlet revealcssLinkElement = document.querySelector('link#revealCssRoot');\n\nlog.debug('MiniLesson Reveal JS helper: initialising');\n\nfunction getThemeURL(theme = undefined){\n    switch(theregion) {\n        case 'ningxia':\n            return chinaThemeURL.replace('{theme}', (theme || defaultTheme));\n        default:\n            return globalThemeURL.replace('{theme}', (theme || defaultTheme));\n    }\n}\n\nfunction hasRevealCSS() {\n    return Array.from(document.styleSheets).some(sheet => {\n        try {\n            return sheet.href && sheet.href.toLowerCase().includes('reveal.min.css');\n        } catch (e) {\n            return false; // Ignore CORS-protected sheets\n        }\n    });\n}\n\nfunction appendLinkElement(linkEl, appendLinkEl = revealcssLinkElement) {\n    if (!appendLinkEl) {\n        let lastLink = document.querySelectorAll('head > link');\n        if (lastLink.length > 0) {\n            appendLinkEl = lastLink.item(lastLink.length - 1);\n        }\n    }\n    if (!appendLinkEl) {\n        document.querySelector('head').append(linkEl);\n    } else {\n        appendLinkEl.insertAdjacentElement('afterend', linkEl);\n    }\n}\n\nexport async function init(element, awsregion,  themename = undefined) {\n    theregion = awsregion;\n\n    switch(theregion) {\n        case 'ningxia':\n            var revealJSURL = chinaJSURL;\n            var revealMarkdownURL = chinaMarkdownURL;\n            var revealCssURL = chinaCssURL;\n            break;\n        default:\n            var revealJSURL = globalJSURL;\n            var revealMarkdownURL = globalMarkdownURL;\n            var revealCssURl = globalCssURL;\n    }\n\n    // Load CSS\n    if (!hasRevealCSS() && !revealcssLinkElement) {\n        revealcssLinkElement = document.createElement('link');\n        revealcssLinkElement.setAttribute('rel', 'stylesheet');\n        revealcssLinkElement.setAttribute('href',  revealCssURl);\n        revealcssLinkElement.id = 'revealCssRoot';\n        revealcssLinkElement.addEventListener('load', function() {\n            dispatchEvent(new CustomEvent('RevealCSSLoaded'));\n        });\n        appendLinkElement(revealcssLinkElement, null);\n    }\n\n    // Load JS\n    var Reveal = await import(revealJSURL);\n    var RevealMarkdown = await import(revealMarkdownURL);\n\n    //Load Theme\n    setTheme(themename);\n\n    const instance = new Reveal(element, {\n        hash: false,\n        fragmentInURL: false,\n        slideNumber: true,\n        plugins: [ RevealMarkdown ],\n            // Prevent keyboard capture when not focused\n        keyboard: {\n            37: 'prev',\n            39: 'next',\n            // Disable all other keyboard shortcuts\n            32: null,  // space\n            13: null,  // enter\n            27: null,  // escape\n            33: null,  // page up\n            34: null,  // page down\n            36: null,  // home\n            35: null   // end\n        },\n        embedded: true,\n        // Disable touch events for the entire document\n        touch: true,\n        // Disable overview mode\n        overview: false,\n        // Don't show controls\n        controls: true,\n        // Don't show progress bar\n        progress: true\n    });\n    instance.on('ready', function() {\n        instance.layout();\n    });\n    addEventListener('RevealCSSLoaded', function() {\n        instance.layout();\n    });\n    return instance;\n}\n\nexport function setTheme(theme) {\n    if (!themeLinkElement) {\n        themeLinkElement = document.createElement('link');\n        themeLinkElement.setAttribute('rel', 'stylesheet');\n        themeLinkElement.setAttribute('href', getThemeURL(theme));\n        themeLinkElement.addEventListener('load', function() {\n            dispatchEvent(new CustomEvent('RevealCSSLoaded'));\n        });\n        appendLinkElement(themeLinkElement);\n    } else {\n        themeLinkElement.setAttribute('href', getThemeURL(theme));\n    }\n}"],"names":["element","awsregion","themename","undefined","theregion","revealJSURL","chinaJSURL","revealMarkdownURL","chinaMarkdownURL","globalJSURL","globalMarkdownURL","revealCssURl","globalCssURL","hasRevealCSS","revealcssLinkElement","document","createElement","setAttribute","id","addEventListener","dispatchEvent","CustomEvent","appendLinkElement","Reveal","RevealMarkdown","setTheme","instance","hash","fragmentInURL","slideNumber","plugins","keyboard","embedded","touch","overview","controls","progress","on","layout","globalRemoteHost","globalThemeURL","chinaRemoteHost","chinaThemeURL","themeLinkElement","querySelector","getThemeURL","theme","replace","Array","from","styleSheets","some","sheet","href","toLowerCase","includes","e","linkEl","appendLinkEl","lastLink","querySelectorAll","length","item","insertAdjacentElement","append","debug"],"mappings":"4KAqD2BA,QAASC,eAAYC,sEAAYC,KAI/C,aAHTC,UAAYH,UAELG,eAEKC,YAAcC,WACdC,kBAAoBC,sBAIpBH,YAAcI,YACdF,kBAAoBG,sBACpBC,aAAeC,aAItBC,gBAAmBC,uBACpBA,qBAAuBC,SAASC,cAAc,QAC9CF,qBAAqBG,aAAa,MAAO,cACzCH,qBAAqBG,aAAa,OAASN,cAC3CG,qBAAqBI,GAAK,gBAC1BJ,qBAAqBK,iBAAiB,QAAQ,WAC1CC,cAAc,IAAIC,YAAY,uBAElCC,kBAAkBR,qBAAsB,WAIxCS,6NAAsBlB,8WAAAA,eACtBmB,qOAA8BjB,0XAAAA,qBAGlCkB,SAASvB,iBAEHwB,SAAW,IAAIH,OAAOvB,QAAS,CACjC2B,MAAM,EACNC,eAAe,EACfC,aAAa,EACbC,QAAS,CAAEN,gBAEXO,SAAU,IACF,UACA,UAEA,QACA,QACA,QACA,QACA,QACA,QACA,MAERC,UAAU,EAEVC,OAAO,EAEPC,UAAU,EAEVC,UAAU,EAEVC,UAAU,WAEdV,SAASW,GAAG,SAAS,WACjBX,SAASY,YAEbnB,iBAAiB,mBAAmB,WAChCO,SAASY,YAENZ,+OAvHLa,iBAAmB,+CACnB9B,sBAAiB8B,oCACjBC,yBAAoBD,4CACpB3B,uBAAkB2B,yCAClB7B,4BAAuB6B,iDACvBE,gBAAkB,oDAClBnC,qBAAgBmC,kCAChBC,wBAAmBD,0CAEnBjC,4BADiBiC,6CACKA,yDAGxBrC,UAAY,KACZuC,iBAAmB,KACnB7B,qBAAuBC,SAAS6B,cAAc,+BAIzCC,kBAAYC,kEAAQ3C,QAEhB,YADFC,UAEQsC,cAAcK,QAAQ,UAAYD,OAXhC,SAaFN,eAAeO,QAAQ,UAAYD,OAbjC,kBAiBZjC,sBACEmC,MAAMC,KAAKlC,SAASmC,aAAaC,MAAKC,mBAE9BA,MAAMC,MAAQD,MAAMC,KAAKC,cAAcC,SAAS,kBACzD,MAAOC,UACE,eAKVlC,kBAAkBmC,YAAQC,oEAAe5C,yBACzC4C,aAAc,KACXC,SAAW5C,SAAS6C,iBAAiB,eACrCD,SAASE,OAAS,IAClBH,aAAeC,SAASG,KAAKH,SAASE,OAAS,IAGlDH,aAGDA,aAAaK,sBAAsB,WAAYN,QAF/C1C,SAAS6B,cAAc,QAAQoB,OAAOP,iBA6E9BhC,SAASqB,OAChBH,iBASDA,iBAAiB1B,aAAa,OAAQ4B,YAAYC,SARlDH,iBAAmB5B,SAASC,cAAc,QAC1C2B,iBAAiB1B,aAAa,MAAO,cACrC0B,iBAAiB1B,aAAa,OAAQ4B,YAAYC,QAClDH,iBAAiBxB,iBAAiB,QAAQ,WACtCC,cAAc,IAAIC,YAAY,uBAElCC,kBAAkBqB,gCAlHtBsB,MAAM"}