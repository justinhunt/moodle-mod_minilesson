{"version":3,"file":"reveal.min.js","sources":["../src/reveal.js"],"sourcesContent":["import log from 'core/log';\n\nconst globalRemoteHost = 'https://cdn.jsdelivr.net/npm/reveal.js@5.2.1';\nconst globalJSURL = `${globalRemoteHost}/dist/reveal.js`;\nconst globalThemeURL = `${globalRemoteHost}/dist/theme/{theme}.min.css`;\nconst globalCssURL = `${globalRemoteHost}/dist/reveal.min.css`;\nconst globalMarkdownURL = `${globalRemoteHost}/plugin/markdown/markdown.js`;\nconst chinaRemoteHost = 'https://cdn.bootcdn.net/ajax/libs/reveal.js/5.2.1';\nconst chinaJSURL = `${chinaRemoteHost}/reveal.min.js`;\nconst chinaThemeURL = `${chinaRemoteHost}/theme/{theme}.min.css`;\nconst chinaCssURL = `${chinaRemoteHost}/reveal.min.css`;\nconst chinaMarkdownURL = `${chinaRemoteHost}/plugin/markdown/markdown.min.js`;\nconst defaultTheme = 'beige';\n\nlet theregion = null;\nlet currenttheme = defaultTheme;\nlet themeLinkElement = null;\nlet revealcssLinkElement = document.querySelector('link#revealCssRoot');\n\nlog.debug('MiniLesson Reveal JS helper: initialising');\n\nfunction getThemeURL(theme = undefined)\n{\n    switch (theregion) {\n        case 'ningxia':\n            return chinaThemeURL.replace('{theme}', (theme || defaultTheme));\n        default:\n            return globalThemeURL.replace('{theme}', (theme || defaultTheme));\n    }\n}\n\nfunction hasRevealCSS()\n{\n    return Array.from(document.styleSheets).some(sheet => {\n        try {\n            return sheet.href && sheet.href.toLowerCase().includes('reveal.min.css');\n        } catch (e) {\n            return false; // Ignore CORS-protected sheets\n        }\n    });\n}\n\nfunction getCSSElement(cssfilename)\n{\n    return Array.from(document.querySelectorAll('link[rel=\"stylesheet\"]'))\n        .find(link => link.href && link.href.toLowerCase().includes(cssfilename)) || null;\n}\n\nfunction appendLinkElement(linkEl, appendLinkEl = revealcssLinkElement)\n{\n    if (!appendLinkEl) {\n        let lastLink = document.querySelectorAll('head > link');\n        if (lastLink.length > 0) {\n            appendLinkEl = lastLink.item(lastLink.length - 1);\n        }\n    }\n    if (!appendLinkEl) {\n        document.querySelector('head').append(linkEl);\n    } else {\n        appendLinkEl.insertAdjacentElement('afterend', linkEl);\n    }\n}\n\nexport async function init(element, awsregion,  themename = undefined)\n{\n    theregion = awsregion;\n\n    switch (theregion) {\n        case 'ningxia':\n            var revealJSURL = chinaJSURL;\n            var revealMarkdownURL = chinaMarkdownURL;\n            var revealCssURL = chinaCssURL;\n            break;\n        default:\n            var revealJSURL = globalJSURL;\n            var revealMarkdownURL = globalMarkdownURL;\n            var revealCssURL = globalCssURL;\n    }\n\n    // Load CSS\n    if (!hasRevealCSS() && !revealcssLinkElement) {\n        revealcssLinkElement = document.createElement('link');\n        revealcssLinkElement.setAttribute('rel', 'stylesheet');\n        revealcssLinkElement.setAttribute('href',  revealCssURL);\n        revealcssLinkElement.id = 'revealCssRoot';\n        revealcssLinkElement.addEventListener('load', function () {\n            dispatchEvent(new CustomEvent('RevealCSSLoaded'));\n        });\n        appendLinkElement(revealcssLinkElement, null);\n    }\n\n    // Load JS\n    var Reveal = await import(revealJSURL);\n    var RevealMarkdown = await import(revealMarkdownURL);\n\n    //Load Theme\n    setTheme(themename);\n\n    const instance = new Reveal(element, {\n        hash: false,\n        fragmentInURL: false,\n        slideNumber: true,\n        plugins: [ RevealMarkdown ],\n            // Prevent keyboard capture when not focused\n        keyboard: {\n            37: 'prev',\n            39: 'next',\n            // Disable all other keyboard shortcuts\n            32: null,  // space\n            13: null,  // enter\n            27: null,  // escape\n            33: null,  // page up\n            34: null,  // page down\n            36: null,  // home\n            35: null   // end\n        },\n        embedded: true,\n        // Enable touch events for the entire document\n        touch: true,\n        // Disable overview mode\n        overview: false,\n        // Show controls\n        controls: true,\n        // Show progress bar\n        progress: true\n    });\n    instance.on('ready', function () {\n        instance.layout();\n    });\n    addEventListener('RevealCSSLoaded', function () {\n        instance.layout();\n    });\n    return instance;\n}\n\nexport function setTheme(newtheme)\n{\n    themeLinkElement = getCSSElement(currenttheme + '.min.css');\n    if (!themeLinkElement) {\n        themeLinkElement = document.createElement('link');\n        themeLinkElement.setAttribute('rel', 'stylesheet');\n        themeLinkElement.setAttribute('href', getThemeURL(newtheme));\n        themeLinkElement.addEventListener('load', function () {\n            dispatchEvent(new CustomEvent('RevealCSSLoaded'));\n        });\n        appendLinkElement(themeLinkElement);\n    } else {\n        themeLinkElement.setAttribute('href', getThemeURL(newtheme));\n    }\n    currenttheme = newtheme || defaultTheme;\n}"],"names":["element","awsregion","themename","undefined","theregion","revealJSURL","chinaJSURL","revealMarkdownURL","chinaMarkdownURL","revealCssURL","chinaCssURL","globalJSURL","globalMarkdownURL","globalCssURL","hasRevealCSS","revealcssLinkElement","document","createElement","setAttribute","id","addEventListener","dispatchEvent","CustomEvent","appendLinkElement","Reveal","RevealMarkdown","setTheme","instance","hash","fragmentInURL","slideNumber","plugins","keyboard","embedded","touch","overview","controls","progress","on","layout","globalRemoteHost","globalThemeURL","chinaRemoteHost","chinaThemeURL","currenttheme","themeLinkElement","querySelector","getThemeURL","theme","replace","Array","from","styleSheets","some","sheet","href","toLowerCase","includes","e","linkEl","appendLinkEl","lastLink","querySelectorAll","length","item","insertAdjacentElement","append","newtheme","cssfilename","find","link","debug"],"mappings":"4KA+D2BA,QAASC,eAAYC,sEAAYC,KAK/C,aAHTC,UAAYH,UAEJG,eAEIC,YAAcC,WACdC,kBAAoBC,iBACpBC,aAAeC,iBAGfL,YAAcM,YACdJ,kBAAoBK,kBACpBH,aAAeI,aAItBC,gBAAmBC,uBACpBA,qBAAuBC,SAASC,cAAc,QAC9CF,qBAAqBG,aAAa,MAAO,cACzCH,qBAAqBG,aAAa,OAAST,cAC3CM,qBAAqBI,GAAK,gBAC1BJ,qBAAqBK,iBAAiB,QAAQ,WAC1CC,cAAc,IAAIC,YAAY,uBAElCC,kBAAkBR,qBAAsB,WAIxCS,6NAAsBnB,8WAAAA,eACtBoB,qOAA8BlB,0XAAAA,qBAGlCmB,SAASxB,iBAEHyB,SAAW,IAAIH,OAAOxB,QAAS,CACjC4B,MAAM,EACNC,eAAe,EACfC,aAAa,EACbC,QAAS,CAAEN,gBAEXO,SAAU,IACF,UACA,UAEA,QACA,QACA,QACA,QACA,QACA,QACA,MAERC,UAAU,EAEVC,OAAO,EAEPC,UAAU,EAEVC,UAAU,EAEVC,UAAU,WAEdV,SAASW,GAAG,SAAS,WACjBX,SAASY,YAEbnB,iBAAiB,mBAAmB,WAChCO,SAASY,YAENZ,+OAlILa,iBAAmB,+CACnB7B,sBAAiB6B,oCACjBC,yBAAoBD,gDACpB3B,uBAAkB2B,yCAClB5B,4BAAuB4B,iDACvBE,gBAAkB,oDAClBpC,qBAAgBoC,kCAChBC,wBAAmBD,0CACnBhC,sBAAiBgC,mCACjBlC,2BAAsBkC,wDAGxBtC,UAAY,KACZwC,aAHiB,QAIjBC,iBAAmB,KACnB9B,qBAAuBC,SAAS8B,cAAc,+BAIzCC,kBAAYC,kEAAQ7C,QAGhB,YADDC,UAEOuC,cAAcM,QAAQ,UAAYD,OAbhC,SAeFP,eAAeQ,QAAQ,UAAYD,OAfjC,kBAmBZlC,sBAEEoC,MAAMC,KAAKnC,SAASoC,aAAaC,MAAKC,mBAE9BA,MAAMC,MAAQD,MAAMC,KAAKC,cAAcC,SAAS,kBACzD,MAAOC,UACE,eAWVnC,kBAAkBoC,YAAQC,oEAAe7C,yBAEzC6C,aAAc,KACXC,SAAW7C,SAAS8C,iBAAiB,eACrCD,SAASE,OAAS,IAClBH,aAAeC,SAASG,KAAKH,SAASE,OAAS,IAGlDH,aAGDA,aAAaK,sBAAsB,WAAYN,QAF/C3C,SAAS8B,cAAc,QAAQoB,OAAOP,iBA8E9BjC,SAASyC,cA7FFC,YAAAA,YA+FcxB,aAAe,WAAhDC,iBA7FOK,MAAMC,KAAKnC,SAAS8C,iBAAiB,2BACvCO,MAAKC,MAAQA,KAAKf,MAAQe,KAAKf,KAAKC,cAAcC,SAASW,gBAAiB,KA6F5EvB,iBASDA,iBAAiB3B,aAAa,OAAQ6B,YAAYoB,YARlDtB,iBAAmB7B,SAASC,cAAc,QAC1C4B,iBAAiB3B,aAAa,MAAO,cACrC2B,iBAAiB3B,aAAa,OAAQ6B,YAAYoB,WAClDtB,iBAAiBzB,iBAAiB,QAAQ,WACtCC,cAAc,IAAIC,YAAY,uBAElCC,kBAAkBsB,mBAItBD,aAAeuB,UAzIE,qBAOjBI,MAAM"}