{"version":3,"sources":["../src/reveal.js"],"names":["remoteCssURL","linkElement","defaultRemoteCssEl","document","querySelector","log","debug","getRemoteCssURL","theme","replace","appendLinkElement","linkEl","appendLinkEl","lastLink","querySelectorAll","length","item","append","insertAdjacentElement","createElement","setAttribute","id","addEventListener","dispatchEvent","CustomEvent","init","element","themename","Reveal","RevealMarkdown","setTheme","instance","hash","fragmentInURL","slideNumber","plugins","keyboard","embedded","touch","overview","controls","progress","on","layout"],"mappings":"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","sourcesContent":["import log from 'core/log';\n\nconst revealJSremoteCssHost = 'https://cdn.jsdelivr.net/npm/reveal.js@5.2.1';\nconst defaultTheme = 'black';\nconst remoteCssURL = `${revealJSremoteCssHost}/dist/theme/{theme}.css`;\nlet linkElement = null;\nlet defaultRemoteCssEl = document.querySelector('link#revealCssRoot');\n\nlog.debug('MiniLesson Reveal JS helper: initialising');\n\nconst getRemoteCssURL = (theme = undefined) => remoteCssURL.replace('{theme}', (theme || defaultTheme));\n\nfunction appendLinkElement(linkEl, appendLinkEl = defaultRemoteCssEl) {\n    if (!appendLinkEl) {\n        let lastLink = document.querySelectorAll('head > link');\n        if (lastLink.length > 0) {\n            appendLinkEl = lastLink.item(lastLink.length - 1);\n        }\n    }\n    if (!appendLinkEl) {\n        document.querySelector('head').append(linkEl);\n    } else {\n        appendLinkEl.insertAdjacentElement('afterend', linkEl);\n    }\n}\n\nif (!defaultRemoteCssEl) {\n    defaultRemoteCssEl = document.createElement('link');\n    defaultRemoteCssEl.setAttribute('rel', 'stylesheet');\n    defaultRemoteCssEl.setAttribute('href', `${revealJSremoteCssHost}/dist/reveal.css`);\n    defaultRemoteCssEl.id = 'revealCssRoot';\n    defaultRemoteCssEl.addEventListener('load', function() {\n        dispatchEvent(new CustomEvent('RevealCSSLoaded'));\n    });\n    appendLinkElement(defaultRemoteCssEl, null);\n}\n\nexport async function init(element, themename = undefined) {\n    const Reveal = await import(`${revealJSremoteCssHost}/dist/reveal.js`);\n    const RevealMarkdown = await import(`${revealJSremoteCssHost}/plugin/markdown/markdown.js`);\n\n    setTheme(themename);\n\n    const instance = new Reveal(element, {\n        hash: false,\n        fragmentInURL: false,\n        slideNumber: true,\n        plugins: [ RevealMarkdown ],\n            // Prevent keyboard capture when not focused\n        keyboard: {\n            37: 'prev',\n            39: 'next',\n            // Disable all other keyboard shortcuts\n            32: null,  // space\n            13: null,  // enter\n            27: null,  // escape\n            33: null,  // page up\n            34: null,  // page down\n            36: null,  // home\n            35: null   // end\n        },\n        embedded: true,\n        // Disable touch events for the entire document\n        touch: true,\n        // Disable overview mode\n        overview: false,\n        // Don't show controls\n        controls: true,\n        // Don't show progress bar\n        progress: true\n    });\n    instance.on('ready', function() {\n        instance.layout();\n    });\n    addEventListener('RevealCSSLoaded', function() {\n        instance.layout();\n    });\n    return instance;\n}\n\nexport function setTheme(theme) {\n    if (!linkElement) {\n        linkElement = document.createElement('link');\n        linkElement.setAttribute('rel', 'stylesheet');\n        linkElement.setAttribute('href', getRemoteCssURL(theme));\n        linkElement.addEventListener('load', function() {\n            dispatchEvent(new CustomEvent('RevealCSSLoaded'));\n        });\n        appendLinkElement(linkElement);\n    } else {\n        linkElement.setAttribute('href', getRemoteCssURL(theme));\n    }\n}"],"file":"reveal.min.js"}