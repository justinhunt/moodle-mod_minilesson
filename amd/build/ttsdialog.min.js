define("mod_minilesson/ttsdialog",["jquery","core/log"],(function($,log){return log.debug("MiniLesson YT Clip Player: initialising"),{init:function(uniqueid){var dialoglines=$("#"+uniqueid+"_ttsdialogplayer .ttsdialogline"),linecount=dialoglines.length,currentline=-1,player=$("#"+uniqueid+"_ttsdialogplayer .ttsdialog_audioplayer"),speakertext=$("#"+uniqueid+"_ttsdialogplayer .ttsdialog_text"),playbutton=$("#"+uniqueid+"_ttsdialogplayer .ttsdialog_button"),actor=$("#"+uniqueid+"_ttsdialogplayer .ttsdialog_actor"),next_play=function(){if(log.debug("currentline: "+currentline),log.debug("linecount: "+linecount),++currentline>=linecount)return currentline=-1,playbutton.html('<i class="fa fa-play"></i>'),speakertext.text(" "),void switch_actor("none");player.attr("src",dialoglines.eq(currentline).data("audiourl"));var speaker=dialoglines.eq(currentline).data("speaker");"soundeffect"==speaker?(switch_actor("none"),speakertext.text(" ")):(switch_actor(speaker),speakertext.text(dialoglines.eq(currentline).data("speakertext"))),player[0].play()},switch_actor=function(speaker){switch(speaker){case"none":actor.removeClass("rolea"),actor.removeClass("roleb"),actor.removeClass("rolec"),actor.addClass("rolenone");break;case"a":actor.removeClass("rolenone"),actor.removeClass("roleb"),actor.removeClass("rolec"),actor.addClass("rolea");break;case"b":actor.removeClass("rolenone"),actor.removeClass("rolea"),actor.removeClass("rolec"),actor.addClass("roleb");break;case"c":actor.removeClass("rolenone"),actor.removeClass("rolea"),actor.removeClass("roleb"),actor.addClass("rolec")}};player[0].addEventListener("ended",next_play),playbutton.click((function(){player[0].paused?(next_play(),playbutton.html('<i class="fa fa-stop"></i>')):(currentline--,player[0].pause(),playbutton.html('<i class="fa fa-play"></i>'))}))}}}));

//# sourceMappingURL=ttsdialog.min.js.map