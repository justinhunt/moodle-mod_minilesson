define ("mod_minilesson/quizfinished",["jquery","core/log","core/modal_factory","core/str","core/modal_events","mod_minilesson/definitions","core/templates","mod_minilesson/correctionsmarkup","mod_minilesson/passagereading"],function(a,b,c,d,e,f,g,h,i){"use strict";b.debug("Poodll Minilesson Finished page: initialising");return{strings:{},clone:function clone(){return a.extend(!0,{},this)},init:function init(){this.init_strings();this.register_events()},register_events:function register_events(){var b=this;a("body").on("click",".btn_finished_attempt",function(d){d.preventDefault();var f=a(this).data("href");if("reattempt"!==a(this).data("action")){window.location.href=f;return}c.create({type:c.types.SAVE_CANCEL,title:b.strings.reattempttitle,body:b.strings.reattemptbody}).then(function(a){a.setSaveButtonText(b.strings.reattempt);var c=a.getRoot();c.on(e.save,function(){window.location.href=f});a.show()})});var d=document.querySelector(".itemscoresbutton");a("#itemscores").on("hidden.bs.collapse shown.bs.collapse",function(a){if("itemscores"===a.target.id&&d){if("shown"===a.type){d.textContent=d.dataset.hideText}else{d.textContent=d.dataset.showText}}});a("body").on("click",".mod_minilesson_finishedanswerdetailslink",function(b){b.preventDefault();var c=a(this).data("type"),d=a(this).data("resultstemplate"),e=a(this).data("resultsdata"),f=a(this).data("teacherreport");e.teacherreport=f;var j=a(this).data("target");if(j===void 0){return}var k=a("#"+j);if(k===void 0){return}if(k.is(":visible")){k.hide();return}if(!k.is(":visible")&&0<k.html().length){k.show();return}g.render("mod_minilesson/"+d,e).then(function(a,b){k.html(a);if(e.hasOwnProperty("grammarerrors")){h.init({correctionscontainer:k,grammarerrors:e.grammarerrors,grammarmatches:e.grammarmatches,insertioncount:e.insertioncount})}if(e.hasOwnProperty("unreached")){i.doComparisonMarkup(e.comparison,j)}k.show();g.runTemplateJS(b)})})},init_strings:function init_strings(){var a=this;d.get_strings([{key:"reattempttitle",component:"mod_minilesson"},{key:"reattemptbody",component:"mod_minilesson"},{key:"reattempt",component:"mod_minilesson"}]).done(function(b){var c=0;a.strings.reattempttitle=b[c++];a.strings.reattemptbody=b[c++];a.strings.reattempt=b[c++]})}}});
//# sourceMappingURL=quizfinished.min.js.map
